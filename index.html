<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MYRIYADH | Premium Guide to Caf√©s, Restaurants & Events</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css">
  <style>
    :root {
      --primary: #5D5CDE;
      --primary-light: #7B7AE9;
      --primary-dark: #4848BB;
      --secondary: #6366F1;
      --accent: #f59e0b;
      --accent-dark: #d97706;
      --success: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --info: #3b82f6;
      --text: #1f2937;
      --text-light: #6b7280;
      --bg: #FFFFFF;
      --card-bg: #ffffff;
      --section-cafe: #f0f9ff;
      --section-restaurant: #fff7ed;
      --section-event: #f5f3ff;
      --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      --shadow-lg: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --radius: 8px;
      --radius-lg: 12px;
      --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Dark mode variables */
    [data-theme="dark"] {
      --primary: #5D5CDE;
      --primary-light: #7B7AE9;
      --primary-dark: #4848BB;
      --secondary: #818cf8;
      --text: #f9fafb;
      --text-light: #d1d5db;
      --bg: #181818;
      --card-bg: #262626;
      --section-cafe: #1e3a8a;
      --section-restaurant: #7c2d12;
      --section-event: #5b21b6;
      --shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
      --shadow-lg: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      color: var(--text);
      background-color: var(--bg);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      transition: background-color 0.3s ease;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
    }

    /* Typography */
    h1, h2, h3, h4 {
      font-family: 'Space Grotesk', sans-serif;
      font-weight: 600;
      line-height: 1.2;
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }

    /* Header */
    header {
      background: linear-gradient(135deg, var(--primary-dark), var(--primary));
      color: white;
      padding: 80px 0 60px;
      position: relative;
      overflow: hidden;
    }

    .header-content {
      position: relative;
      z-index: 2;
      text-align: center;
      animation: fadeIn 0.8s ease-out;
    }

    .logo {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 12px;
      letter-spacing: -0.025em;
    }

    .tagline {
      font-size: 1.125rem;
      opacity: 0.9;
      max-width: 600px;
      margin: 0 auto 24px;
    }

    .author-badge {
      position: absolute;
      top: 24px;
      left: 24px;
      background: rgba(255, 255, 255, 0.15);
      padding: 8px 16px;
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 500;
      backdrop-filter: blur(4px);
    }

    /* Navigation */
    nav {
      background-color: var(--card-bg);
      box-shadow: var(--shadow);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .nav-container {
      display: flex;
      justify-content: center;
      padding: 0;
    }

    .nav-link {
      color: var(--text);
      text-decoration: none;
      font-weight: 500;
      padding: 16px 20px;
      margin: 0 2px;
      transition: var(--transition);
      position: relative;
      font-size: 0.9375rem;
    }

    .nav-link:hover, .nav-link:focus, .nav-link.active {
      color: var(--primary);
    }

    .nav-link:after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 20px;
      right: 20px;
      height: 2px;
      background-color: var(--primary);
      transform: scaleX(0);
      transition: var(--transition);
    }

    .nav-link:hover:after, .nav-link:focus:after, .nav-link.active:after {
      transform: scaleX(1);
    }

    /* Theme toggle */
    .theme-toggle {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 48px;
      height: 48px;
      border-radius: 50%;
      background-color: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: var(--shadow-lg);
      z-index: 99;
      border: none;
      transition: var(--transition);
    }

    .theme-toggle:hover {
      transform: scale(1.1);
    }

    /* Hero */
    .hero {
      text-align: center;
      padding: 48px 0 64px;
      animation: fadeIn 0.6s ease-out;
    }

    .hero h1 {
      font-size: 2.25rem;
      margin-bottom: 16px;
      color: var(--primary-dark);
    }

    .hero p {
      max-width: 700px;
      margin: 0 auto 32px;
      color: var(--text-light);
      font-size: 1.125rem;
    }

    /* Quick filters */
    .quick-filters {
      display: flex;
      flex-wrap: nowrap;
      gap: 12px;
      margin-bottom: 24px;
      overflow-x: auto;
      padding-bottom: 8px;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: thin;
    }

    .quick-filters::-webkit-scrollbar {
      height: 4px;
    }

    .quick-filters::-webkit-scrollbar-track {
      background: #f1f1f1;
      border-radius: 10px;
    }

    .quick-filters::-webkit-scrollbar-thumb {
      background: #c1c1c1;
      border-radius: 10px;
    }

    .quick-filter {
      padding: 10px 18px;
      background-color: var(--card-bg);
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      white-space: nowrap;
      border: 1px solid #e5e7eb;
      box-shadow: var(--shadow);
    }

    .quick-filter:hover, .quick-filter.active {
      background-color: var(--primary);
      color: white;
      border-color: var(--primary);
      transform: translateY(-2px);
    }

    /* Search & Filters */
    .search-container {
      background-color: var(--card-bg);
      border-radius: var(--radius-lg);
      padding: 24px;
      box-shadow: var(--shadow-lg);
      margin-bottom: 32px;
      transition: var(--transition);
      animation: fadeIn 0.5s ease-out;
    }

    .search-bar {
      display: flex;
      margin-bottom: 24px;
    }

    .search-input {
      flex: 1;
      padding: 12px 16px;
      border: 1px solid #e5e7eb;
      border-radius: var(--radius) 0 0 var(--radius);
      font-size: 1rem;
      outline: none;
      transition: var(--transition);
      background-color: var(--card-bg);
      color: var(--text);
    }

    .search-input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(93, 92, 222, 0.1);
    }

    .search-btn {
      padding: 0 20px;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: 0 var(--radius) var(--radius) 0;
      cursor: pointer;
      transition: var(--transition);
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .search-btn:hover {
      background-color: var(--primary-dark);
    }

    .filters {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 16px;
    }

    .filter-group {
      margin-bottom: 0;
      animation: fadeIn 0.4s ease-out;
    }

    .filter-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--text);
      font-size: 0.875rem;
    }

    .filter-select {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #e5e7eb;
      border-radius: var(--radius);
      font-size: 0.9375rem;
      transition: var(--transition);
      background-color: var(--card-bg);
      color: var(--text);
    }

    .filter-select:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(93, 92, 222, 0.1);
      outline: none;
    }

    .filter-actions {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 16px;
    }

    .filter-btn {
      padding: 10px 20px;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      transition: var(--transition);
      font-weight: 500;
      font-size: 0.9375rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .filter-btn:hover {
      background-color: var(--primary-dark);
      transform: translateY(-2px);
    }

    .clear-btn {
      background: none;
      border: none;
      color: var(--text-light);
      cursor: pointer;
      transition: var(--transition);
      font-size: 0.875rem;
      font-weight: 500;
    }

    .clear-btn:hover {
      color: var(--primary);
    }

    .active-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 16px;
    }

    .filter-chip {
      background-color: var(--primary-light);
      color: white;
      padding: 6px 12px;
      border-radius: 9999px;
      font-size: 0.8125rem;
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: 500;
      animation: fadeIn 0.3s ease-out;
    }

    .filter-chip button {
      background: none;
      border: none;
      color: white;
      cursor: pointer;
      font-size: 0.875rem;
      line-height: 1;
      display: flex;
      align-items: center;
    }

    /* Enhanced filter elements */
    .price-range-container {
      width: 100%;
      padding: 10px 0;
    }

    .price-range {
      -webkit-appearance: none;
      width: 100%;
      height: 6px;
      border-radius: 5px;
      background: #e5e7eb;
      outline: none;
    }

    .price-range::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--primary);
      cursor: pointer;
      transition: var(--transition);
    }

    .price-range::-moz-range-thumb {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--primary);
      cursor: pointer;
      border: none;
      transition: var(--transition);
    }

    .price-range::-webkit-slider-thumb:hover {
      transform: scale(1.2);
    }

    .price-range::-moz-range-thumb:hover {
      transform: scale(1.2);
    }

    .price-labels {
      display: flex;
      justify-content: space-between;
      font-size: 0.75rem;
      color: var(--text-light);
      margin-top: 4px;
    }

    .multi-select-container {
      position: relative;
    }

    .multi-select-header {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #e5e7eb;
      border-radius: var(--radius);
      font-size: 0.9375rem;
      background-color: var(--card-bg);
      color: var(--text);
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
    }

    .multi-select-placeholder {
      color: var(--text-light);
    }

    .multi-select-selected {
      max-width: 90%;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .multi-select-dropdown {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background-color: var(--card-bg);
      border: 1px solid #e5e7eb;
      border-radius: var(--radius);
      margin-top: 4px;
      max-height: 200px;
      overflow-y: auto;
      z-index: 10;
      box-shadow: var(--shadow-lg);
      display: none;
    }

    .multi-select-dropdown.open {
      display: block;
      animation: fadeIn 0.2s ease-out;
    }

    .multi-select-option {
      padding: 8px 12px;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .multi-select-option:hover {
      background-color: rgba(93, 92, 222, 0.1);
    }

    .multi-select-option.selected {
      background-color: rgba(93, 92, 222, 0.2);
    }

    .multi-select-checkbox {
      width: 16px;
      height: 16px;
      border: 1px solid var(--text-light);
      border-radius: 3px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      transition: var(--transition);
    }

    .multi-select-option.selected .multi-select-checkbox {
      background-color: var(--primary);
      border-color: var(--primary);
    }

    /* Location related */
    .location-container {
      margin-bottom: 20px;
      padding: 12px 16px;
      background-color: rgba(93, 92, 222, 0.08);
      border-radius: var(--radius);
      display: flex;
      align-items: center;
      gap: 10px;
      animation: fadeIn 0.4s ease-out;
    }

    .location-container.hidden {
      display: none;
    }

    .location-btn {
      padding: 6px 12px;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      font-size: 0.875rem;
      transition: var(--transition);
      white-space: nowrap;
    }

    .location-btn:hover {
      background-color: var(--primary-dark);
    }

    .location-text {
      font-size: 0.875rem;
      color: var(--text);
    }

    .sort-distance {
      padding: 10px 18px;
      background-color: var(--card-bg);
      border-radius: 9999px;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: var(--transition);
      white-space: nowrap;
      border: 1px solid #e5e7eb;
      margin-left: auto;
      display: none;
    }

    .sort-distance.visible {
      display: block;
      animation: fadeIn 0.4s ease-out;
    }

    .sort-distance:hover, .sort-distance.active {
      background-color: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    /* Sections */
    .section {
      margin-bottom: 48px;
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow-lg);
      animation: fadeIn 0.5s ease-out;
      transition: transform 0.3s ease;
      transform-origin: center;
    }

    .section:hover {
      transform: translateY(-4px);
    }

    .section-header {
      padding: 20px 24px;
      background-color: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .section-title {
      font-size: 1.25rem;
      font-weight: 600;
    }

    .section-icon {
      font-size: 1.5rem;
    }

    .section-cafe .section-header {
      background-color: #0ea5e9;
    }

    .section-restaurant .section-header {
      background-color: #f97316;
    }

    .section-event .section-header {
      background-color: #8b5cf6;
    }

    .section-content {
      background-color: var(--card-bg);
      padding: 24px;
    }

    /* Cards */
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
      gap: 24px;
    }

    .card {
      background-color: var(--card-bg);
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow);
      transition: var(--transition);
      border: 1px solid #e5e7eb;
      position: relative;
      animation: fadeIn 0.4s ease-out;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    }

    .favorite-btn {
      position: absolute;
      top: 16px;
      right: 16px;
      background: rgba(255, 255, 255, 0.9);
      border: none;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 2;
      color: #ccc;
      transition: var(--transition);
    }

    .favorite-btn:hover {
      color: #ff6b6b;
      transform: scale(1.1);
    }

    .favorite-btn.active {
      color: #ff6b6b;
    }


    .open-status {
  position: absolute;
  top: 16px;
  right: 56px; /* Next to favorite button */
  padding: 4px 12px;
  border-radius: 9999px;
  font-size: 0.75rem;
  font-weight: 600;
  z-index: 2;
  display: flex;
  align-items: center;
  gap: 4px;
  animation: fadeIn 0.3s ease-out;
  box-shadow: var(--shadow);
}


    .open-status.open {
      background-color: rgba(16, 185, 129, 0.1);
      color: var(--success);
    }

    .open-status.closed {
      background-color: rgba(239, 68, 68, 0.1);
      color: var(--danger);
    }

    .card-distance {
      position: absolute;
      top: 16px;
      left: 110px;
      padding: 4px 12px;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
      z-index: 2;
      background-color: rgba(59, 130, 246, 0.1);
      color: var(--info);
      display: none;
      align-items: center;
      gap: 4px;
      animation: fadeIn 0.3s ease-out;
      box-shadow: var(--shadow);
    }

    .card-distance.visible {
      display: flex;
    }

    .card-header {
      padding: 20px;
      border-bottom: 1px solid #f3f4f6;
      position: relative;
    }

    .card-title {
      font-size: 1.25rem;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 4px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .card-title:before {
      content: "";
      width: 12px;
      height: 12px;
      border-radius: 9999px;
      background-color: var(--primary);
    }

    .section-cafe .card-title:before {
      background-color: #0ea5e9;
    }

    .section-restaurant .card-title:before {
      background-color: #f97316;
    }

    .section-event .card-title:before {
      background-color: #8b5cf6;
    }

    .card-tag {
      position: absolute;
      top: 20px;
      right: 20px;
      background-color: var(--accent);
      color: white;
      padding: 4px 12px;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .card-body {
      padding: 0 20px 20px;
    }

    .card-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 16px;
      font-size: 0.9375rem;
    }

    .card-table th, .card-table td {
      padding: 12px 0;
      text-align: left;
      border-bottom: 1px solid #f3f4f6;
      vertical-align: top;
    }

    .card-table th {
      font-weight: 500;
      color: var(--text-light);
      width: 35%;
      font-size: 0.875rem;
    }

    .card-table tr:last-child th, 
    .card-table tr:last-child td {
      border-bottom: none;
    }

    .card-rating {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-bottom: 16px;
    }

    .star {
      color: var(--accent);
      font-size: 1rem;
    }

    .star.inactive {
      color: #e5e7eb;
    }

    .card-reviews {
      margin-top: 16px;
      padding-left: 20px;
      font-size: 0.9375rem;
      color: var(--text-light);
    }

    .card-reviews li {
      margin-bottom: 8px;
      position: relative;
    }

    .card-reviews li:before {
      content: "‚Ä¢";
      position: absolute;
      left: -16px;
      color: var(--primary);
    }

    .section-cafe .card-reviews li:before {
      color: #0ea5e9;
    }

    .section-restaurant .card-reviews li:before {
      color: #f97316;
    }

    .section-event .card-reviews li:before {
      color: #8b5cf6;
    }

    .card-footer {
      padding: 16px 20px;
      border-top: 1px solid #f3f4f6;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .card-location {
      color: var(--text-light);
      font-size: 0.875rem;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .card-location svg {
      width: 16px;
      height: 16px;
    }

    .card-link {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
      transition: var(--transition);
      font-size: 0.875rem;
    }

    .card-link:hover {
      color: var(--primary-dark);
      text-decoration: underline;
    }

    .card-buttons {
      display: flex;
      gap: 8px;
    }

    .card-btn {
      padding: 8px 16px;
      background-color: var(--primary);
      color: white;
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      transition: var(--transition);
      font-size: 0.875rem;
      font-weight: 500;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .card-btn:hover {
      background-color: var(--primary-dark);
      transform: translateY(-2px);
    }

    .card-btn.secondary {
      background-color: #f3f4f6;
      color: var(--text);
    }

    .card-btn.secondary:hover {
      background-color: #e5e7eb;
    }

    .card-btn svg {
      width: 16px;
      height: 16px;
    }

    /* Social sharing */
    .social-share {
      display: flex;
      gap: 8px;
      margin-top: 16px;
    }

    .social-btn {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 14px;
      transition: var(--transition);
      text-decoration: none;
    }

    .social-btn.instagram {
      background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
    }

    .social-btn:hover {
      transform: scale(1.1);
    }

    /* Map */
    .map-container {
      margin: 48px 0;
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow-lg);
      border: 1px solid #e5e7eb;
      transition: var(--transition);
      animation: fadeIn 0.6s ease-out;
    }

    .map-container:hover {
      transform: translateY(-4px);
    }

    .map-header {
      padding: 16px 24px;
      background-color: var(--primary);
      color: white;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .map-header svg {
      width: 20px;
      height: 20px;
    }

    #map {
      height: 400px;
      width: 100%;
    }

    /* Countdown */
    .countdown {
      font-weight: 600;
      color: #ef4444;
      margin: 16px 0;
      font-size: 0.9375rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .countdown svg {
      width: 16px;
      height: 16px;
    }

    /* Footer */
    footer {
      background-color: var(--primary-dark);
      color: white;
      padding: 48px 0;
      margin-top: 64px;
    }

    .footer-content {
      max-width: 600px;
      margin: 0 auto;
      text-align: center;
    }

    .footer-logo {
      font-family: 'Space Grotesk', sans-serif;
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 24px;
      margin: 20px 0;
    }

    .footer-link {
      color: white;
      text-decoration: none;
      transition: var(--transition);
      font-size: 0.875rem;
      font-weight: 500;
      opacity: 0.8;
    }

    .footer-link:hover {
      opacity: 1;
      text-decoration: underline;
    }

    .copyright {
      font-size: 0.8125rem;
      opacity: 0.7;
      margin-top: 24px;
    }

    /* Newsletter */
    .newsletter {
      margin-top: 32px;
    }

    .newsletter-title {
      font-size: 1rem;
      margin-bottom: 12px;
    }

    .newsletter-form {
      display: flex;
      max-width: 400px;
      margin: 0 auto;
    }

    .newsletter-input {
      flex: 1;
      padding: 10px 12px;
      border: 1px solid #e5e7eb;
      border-radius: var(--radius) 0 0 var(--radius);
      font-size: 0.9375rem;
      outline: none;
      background-color: rgba(255, 255, 255, 0.1);
      color: white;
    }

    .newsletter-input::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }

    .newsletter-btn {
      padding: 0 16px;
      background-color: var(--accent);
      color: white;
      border: none;
      border-radius: 0 var(--radius) var(--radius) 0;
      cursor: pointer;
      font-weight: 500;
    }

    .newsletter-btn:hover {
      background-color: var(--accent-dark);
    }

    /* Canvas App Notice */
    .app-notice {
      background-color: rgba(93, 92, 222, 0.1);
      border-left: 4px solid var(--primary);
      padding: 12px 16px;
      margin-bottom: 24px;
      border-radius: 0 var(--radius) var(--radius) 0;
      font-size: 0.875rem;
      color: var(--text);
      animation: fadeIn 0.4s ease-out;
    }

    [data-theme="dark"] .app-notice {
      background-color: rgba(93, 92, 222, 0.15);
    }

    /* Loading indicator */
    .loader {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .loader-circle {
      width: 40px;
      height: 40px;
      border: 3px solid #f3f4f6;
      border-top: 3px solid var(--primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Skeleton loading state */
    .skeleton {
      background: linear-gradient(
        90deg,
        rgba(0, 0, 0, 0.06) 25%,
        rgba(0, 0, 0, 0.15) 37%,
        rgba(0, 0, 0, 0.06) 63%
      );
      background-size: 400% 100%;
      animation: shimmer 1.4s ease infinite;
      border-radius: var(--radius);
    }

    .skeleton-card {
      height: 300px;
      border-radius: var(--radius-lg);
    }

    .skeleton-line {
      height: 20px;
      margin-bottom: 8px;
      width: 100%;
    }

    .skeleton-line.short {
      width: 60%;
    }

    /* Notifications */
    .notification-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
    }

    .notification {
      padding: 12px 20px;
      margin-bottom: 10px;
      border-radius: var(--radius);
      color: white;
      box-shadow: var(--shadow-lg);
      display: flex;
      align-items: center;
      gap: 12px;
      transform: translateX(120%);
      transition: transform 0.3s ease;
      animation: slideIn 0.3s forwards;
    }

    .notification.success {
      background-color: var(--success);
    }

    .notification.error {
      background-color: var(--danger);
    }

    .notification.info {
      background-color: var(--info);
    }

    @keyframes slideIn {
      to { transform: translateX(0); }
    }

    @keyframes slideOut {
      to { transform: translateX(120%); }
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .cards-grid {
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      }
    }

    @media (max-width: 768px) {
      .logo {
        font-size: 2rem;
      }
      
      .nav-container {
        flex-wrap: wrap;
        padding: 8px 0;
      }
      
      .nav-link {
        padding: 12px 16px;
        font-size: 0.875rem;
      }
      
      .filters {
        grid-template-columns: 1fr 1fr;
      }
      
      .hero h1 {
        font-size: 2rem;
      }

      .hero p {
        font-size: 1rem;
      }
    }
    
    @media (max-width: 640px) {
      .header {
        padding: 64px 0 48px;
      }

      .author-badge {
        top: 16px;
        left: 16px;
      }

      .search-container {
        padding: 20px;
      }

      .filters {
        grid-template-columns: 1fr;
      }
      
      .filter-actions {
        flex-direction: column;
        gap: 12px;
      }
      
      .filter-btn, .clear-btn {
        width: 100%;
      }

      .cards-grid {
        grid-template-columns: 1fr;
      }

      .card {
        max-width: 100%;
      }

      .card-buttons {
        flex-wrap: wrap;
        justify-content: flex-end;
      }

      .card-btn {
        padding: 6px 12px;
        font-size: 0.8125rem;
      }
    }

    @media (max-width: 480px) {
      .logo {
        font-size: 1.75rem;
      }

      .tagline {
        font-size: 1rem;
      }

      .hero h1 {
        font-size: 1.75rem;
      }

      .section-header {
        padding: 16px 20px;
      }

      .section-title {
        font-size: 1.125rem;
      }

      .section-content {
        padding: 20px;
      }

      .card-header, .card-body, .card-footer {
        padding-left: 16px;
        padding-right: 16px;
      }

      .newsletter-form {
        flex-direction: column;
      }

      .newsletter-input {
        border-radius: var(--radius) var(--radius) 0 0;
      }

      .newsletter-btn {
        border-radius: 0 0 var(--radius) var(--radius);
        padding: 10px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content container">
      <span class="author-badge">By Abdulrahman Al Harbi</span>
      <h1 class="logo">MYRIYADH</h1>
      <p class="tagline">Your curated guide to the finest caf√©s, restaurants, and events in Saudi Arabia's vibrant capital</p>
    </div>
  </header>
  <nav>
    <div class="container nav-container">
      <a href="#cafes" class="nav-link active">Caf√©s</a>
      <a href="#restaurants" class="nav-link">Restaurants</a>
      <a href="#events" class="nav-link">Events</a>
      <a href="#map" class="nav-link">Map</a>
      <a href="#favorites" class="nav-link">Favorites</a>
    </div>
  </nav>
  <main class="container">
    <section class="hero">
      <h1>Discover Riyadh's Best</h1>
      <p>Explore the finest caf√©s, restaurants, and upcoming events in Saudi Arabia's vibrant capital. Filter by neighborhood, cuisine, price and more to find your perfect spot.</p>
      <div class="app-notice">
        <strong>Pro Tip:</strong> Use the new "Open Now" filter to find venues that are currently open, or try the "Sort by Distance" option after sharing your location.
      </div>
      <div id="location-container" class="location-container hidden">
        <button id="get-location" class="location-btn">
          <i class="fas fa-location-arrow"></i> Use My Location
        </button>
        <span class="location-text">Share your location to discover nearby venues</span>
        <button id="sort-distance" class="sort-distance">
          <i class="fas fa-sort-amount-down"></i> Sort by Distance
        </button>
      </div>
    </section>
    <div class="quick-filters">
      <div class="quick-filter" data-filter="all">üîç All Places</div>
      <div class="quick-filter" data-filter="open-now">üïí Open Now</div>
      <div class="quick-filter" data-filter="top-rated">‚≠ê Top Rated</div>
      <div class="quick-filter" data-filter="budget">üí∞ Budget-Friendly</div>
      <div class="quick-filter" data-filter="new">üÜï New Additions</div>
      <div class="quick-filter" data-filter="coffee">‚òï Specialty Coffee</div>
      <div class="quick-filter" data-filter="events">üéâ Upcoming Events</div>
    </div>
    <section id="filters" class="search-container">
      <div class="search-bar">
        <input type="text" id="search-input" class="search-input" placeholder="Search for caf√©s, restaurants or events...">
        <button id="search-btn" class="search-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
          Search
        </button>
      </div>
      <div class="filters">
        <div class="filter-group">
          <label for="filter-neighborhood" class="filter-label">Neighborhood</label>
          <select id="filter-neighborhood" class="filter-select">
            <option value="">All Areas</option>
            <option value="Alaqiq">Alaqiq</option>
            <option value="Al Faisaliah">Al Faisaliah</option>
            <option value="Al Malqa">Al Malqa</option>
            <option value="Al Mohammadiyah">Al Mohammadiyah</option>
            <option value="Almuruj">Almuruj</option>
            <option value="Al Murabba">Al Murabba</option>
            <option value="Al Mursalat">Al Mursalat</option>
            <option value="Al Nakheel">Al Nakheel</option>
            <option value="Al Olaya">Al Olaya</option>
            <option value="Alquds">Alquds</option>
            <option value="Al Qirawan">Al Qirawan</option>
            <option value="Al-Rabea">Al-Rabea</option>
            <option value="Al Safarat">Al Safarat</option>
            <option value="Al Wadi">Al Wadi</option>
            <option value="Al Yasmin">Al Yasmin</option>
            <option value="An Nafal">An Nafal</option>
            <option value="An Narjis">An Narjis</option>
            <option value="As Sulimaniyah">As Sulimaniyah</option>
            <option value="At Taawun">At Taawun</option>
            <option value="Hittin">Hittin</option>
            <option value="King Fahd">King Fahd</option>
            <option value="King Salman">King Salman</option>
            <option value="Nuzha">Nuzha</option>
            <option value="Qurtuba">Qurtuba</option>
            <option value="Umm Al Hamam Al Gharbi">Umm Al Hamam Al Gharbi</option>
          </select>
        </div>

        <div class="filter-group">
          <label for="filter-type" class="filter-label">Type</label>
          <select id="filter-type" class="filter-select">
            <option value="">All Types</option>
            <option value="cafe">Caf√©</option>
            <option value="restaurant">Restaurant</option>
            <option value="event">Event</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label class="filter-label">Price Range</label>
          <div class="price-range-container">
            <input type="range" id="price-range" class="price-range" min="1" max="3" value="3">
            <div class="price-labels">
              <span>$ Budget</span>
              <span>$$ Moderate</span>
              <span>$$$ Premium</span>
            </div>
          </div>
        </div>
        
        <div class="filter-group">
          <label for="filter-rating" class="filter-label">Rating</label>
          <select id="filter-rating" class="filter-select">
            <option value="">All Ratings</option>
            <option value="4.5">4.5+ ‚òÖ</option>
            <option value="4">4.0+ ‚òÖ</option>
            <option value="3">3.0+ ‚òÖ</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="cuisine-select" class="filter-label">Cuisine</label>
          <div id="cuisine-multiselect" class="multi-select-container">
            <div class="multi-select-header">
              <span class="multi-select-placeholder">All Cuisines</span>
              <i class="fas fa-chevron-down"></i>
            </div>
            <div class="multi-select-dropdown">
              <div class="multi-select-option" data-value="Italian">
                <div class="multi-select-checkbox"></div>
                <span>Italian</span>
              </div>
              <div class="multi-select-option" data-value="International">
                <div class="multi-select-checkbox"></div>
                <span>International</span>
              </div>
              <div class="multi-select-option" data-value="Steakhouse">
                <div class="multi-select-checkbox"></div>
                <span>Steakhouse</span>
              </div>
              <div class="multi-select-option" data-value="French">
                <div class="multi-select-checkbox"></div>
                <span>French</span>
              </div>
              <div class="multi-select-option" data-value="Japanese">
                <div class="multi-select-checkbox"></div>
                <span>Japanese</span>
              </div>
              <div class="multi-select-option" data-value="Chinese">
                <div class="multi-select-checkbox"></div>
                <span>Chinese</span>
              </div>
              <div class="multi-select-option" data-value="Latin American">
                <div class="multi-select-checkbox"></div>
                <span>Latin American</span>
              </div>
              <div class="multi-select-option" data-value="American">
                <div class="multi-select-checkbox"></div>
                <span>American</span>
              </div>
              <div class="multi-select-option" data-value="Cafe">
                <div class="multi-select-checkbox"></div>
                <span>Caf√©</span>
              </div>
              <div class="multi-select-option" data-value="Specialty Coffee">
                <div class="multi-select-checkbox"></div>
                <span>Specialty Coffee</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="filter-group">
          <label for="filter-coffee" class="filter-label">Coffee Type</label>
          <select id="filter-coffee" class="filter-select">
            <option value="">All Types</option>
            <option value="Specialty">Specialty</option>
            <option value="Trendy">Trendy</option>
            <option value="Modern">Modern</option>
            <option value="Desserts">Desserts</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label for="filter-event-category" class="filter-label">Event Category</label>
          <select id="filter-event-category" class="filter-select">
            <option value="">All Categories</option>
            <option value="Food">Food</option>
            <option value="Lifestyle">Lifestyle</option>
            <option value="Sports">Sports</option>
            <option value="Expo">Expo</option>
          </select>
        </div>
      </div>
      <div class="filter-actions">
        <button id="apply-btn" class="filter-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="4" y1="21" x2="4" y2="14"></line>
            <line x1="4" y1="10" x2="4" y2="3"></line>
            <line x1="12" y1="21" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12" y2="3"></line>
            <line x1="20" y1="21" x2="20" y2="16"></line>
            <line x1="20" y1="12" x2="20" y2="3"></line>
            <line x1="1" y1="14" x2="7" y2="14"></line>
            <line x1="9" y1="8" x2="15" y2="8"></line>
            <line x1="17" y1="16" x2="23" y2="16"></line>
          </svg>
          Apply Filters
        </button>
        <button id="clear-btn" class="clear-btn">Clear All Filters</button>
      </div>
      <div id="active-filters" class="active-filters"></div>
    </section>
    <section id="cafes" class="section section-cafe">
      <div class="section-header">
        <h2 class="section-title">Caf√©s</h2>
        <span class="section-icon">‚òï</span>
      </div>
      <div class="section-content">
        <div class="cards-grid" id="cafes-list">
          <div class="loader">
            <div class="loader-circle"></div>
          </div>
        </div>
      </div>
    </section>
    <section id="restaurants" class="section section-restaurant" style="display: none;">
      <div class="section-header">
        <h2 class="section-title">Restaurants</h2>
        <span class="section-icon">üçΩÔ∏è</span>
      </div>
      <div class="section-content">
        <div class="cards-grid" id="restaurants-list">
          <div class="loader">
            <div class="loader-circle"></div>
          </div>
        </div>
      </div>
    </section>
    <section id="events" class="section section-event" style="display: none;">
      <div class="section-header">
        <h2 class="section-title">Events</h2>
        <span class="section-icon">üéâ</span>
      </div>
      <div class="section-content">
        <div class="cards-grid" id="events-list">
          <div class="loader">
            <div class="loader-circle"></div>
          </div>
        </div>
      </div>
    </section>    
    <section id="favorites" class="section" style="display: none;">
      <div class="section-header">
        <h2 class="section-title">Your Favorites</h2>
        <span class="section-icon">‚ù§Ô∏è</span>
      </div>
      <div class="section-content">
        <div class="cards-grid" id="favorites-list">
          <div class="loader">
            <div class="loader-circle"></div>
          </div>
        </div>
      </div>
    </section>
    <section class="map-container">
      <div class="map-header">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
          <circle cx="12" cy="10" r="3"></circle>
        </svg>
        Riyadh Caf√©s, Restaurants & Events Map
      </div>
      <div id="map"></div>
    </section>
    <div id="notification-container" class="notification-container"></div>
  </main>
  <footer>
    <div class="container footer-content">
      <div class="footer-logo">MYRIYADH</div>
      <div class="footer-links">
        <a href="#" class="footer-link">About</a>
        <a href="#" class="footer-link">Contact</a>
        <a href="#" class="footer-link">Privacy</a>
        <a href="#" class="footer-link">Terms</a>
      </div>
      <div class="newsletter">
        <div class="newsletter-title">Stay updated with Riyadh's best</div>
        <form class="newsletter-form" id="newsletter-form">
          <input type="email" class="newsletter-input" placeholder="Your email address" required>
          <button type="submit" class="newsletter-btn">Subscribe</button>
        </form>
      </div>
      <p class="copyright">¬© 2025 MYRIYADH. All rights reserved. By Abdulrahman Al Harbi</p>
    </div>
  </footer>
  <button class="theme-toggle" id="theme-toggle">
    <i class="fas fa-moon"></i>
  </button>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>
  <script>
    // Global variables
    let userFavorites = [];
    let userLocation = null;
    let selectedCuisines = [];
    let isOpenNowFilterActive = false;
    let isSortByDistanceActive = false;
    
    const data = {
      cafes: [
        {
          name: "≈åkawa",
          type: "cafe",
          neighborhood: "An Narjis",
          price: "$$",
          rating: 4.3,
          cuisine: "Japanese-style caf√©",
          coffee: "Specialty",
          coords: [24.8407563, 46.673187],
          instagram: "okawa_sa",
          overview: {
            "Cuisine": "Japanese-style caf√©",
            "Google Rating": "4.3/5",
            "Avg. Price (SAR)": "50‚Äì100",
            "Hours": "7:00 AM - 2:00 AM (except Friday 7 AM - 11:30 AM, 12:30 PM - 2 AM)",
            "Notes": "Known for fluffy Japanese pancakes and matcha drinks. Cozy interior; parking may be limited.",
            "Contact": "0502519311"
          },
          reviews: [
            "Great flat white and vibes! ‚Äì Sara",
            "Loved the desserts. ‚Äì Faisal"
          ],
          links: {
            "Location": "https://maps.app.goo.gl/v1fW9maQRPLnUi8N6"
          }
        },
        {
          name: "Ch√©rie",
          type: "cafe",
          neighborhood: "Al Olaya",
          price: "$$",
          rating: 4.7,
          cuisine: "Specialty coffee & pastries",
          coffee: "Desserts",
          coords: [24.6957467, 46.6843262],
          instagram: "cherie.sa1",
          overview: {
            "Cuisine": "Specialty coffee & pastries",
            "Google Rating": "4.7/5",
            "Avg. Price (SAR)": "50‚Äì100",
            "Hours": "Open 24 hours (except Friday 12:30 PM - 12 AM)",
            "Notes": "Offers Spanish lattes, tiramisu, and cheesecake. Cozy atmosphere with outdoor seating.",
            "Contact": "https://www.instagram.com/cherie.sa1/?hl=en"
          },
          reviews: [
            "Chic place for coffee. ‚Äì Aisha",
            "Desserts were amazing! ‚Äì Omar"
          ],
          links: {
            "Location": "https://maps.app.goo.gl/oCaxRMHctaP2mFAP9"
          }
        },
        {
          name: "Alf",
          type: "cafe",
          neighborhood: "Al Wadi",
          price: "$$",
          rating: 4.5,
          cuisine: "Specialty coffee & desserts",
          coffee: "Modern",
          coords: [24.7824504, 46.6955503],
          instagram: "alfdesserts",
          overview: {
            "Cuisine": "Specialty coffee & desserts",
            "Google Rating": "4.5/5",
            "Avg. Price (SAR)": "50‚Äì100",
            "Hours": "7:00 AM - 12:30 AM",
            "Notes": "Features a minimalist, Instagrammable interior with a water feature. Offers specialty coffee and desserts.",
            "Contact": "0545249936"
          },
          reviews: [
            "Modern and spacious. ‚Äì Reem",
            "Good pastries. ‚Äì Yara"
          ],
          links: {
            "Location": "https://maps.app.goo.gl/iHMhqyHxVG14AN4f6"
          }
        },
        {
          name: "BTW",
          type: "cafe",
          neighborhood: "An Nafal",
          price: "$$",
          rating: 4.6,
          cuisine: "Specialty coffee",
          coffee: "Trendy",
          coords: [24.7773738, 46.6842458],
          instagram: "btw.sa",
          overview: {
            "Cuisine": "Specialty coffee",
            "Google Rating": "4.6/5",
            "Avg. Price (SAR)": "50‚Äì100",
            "Hours": "6:00 AM - 12:00 AM",
            "Notes": "Limited information available; presumed to be a local specialty caf√©.",
            "Contact": "https://www.instagram.com/btw.sa/"
          },
          reviews: [
            "Friendly staff and trendy decor. ‚Äì Ahmed"
          ],
          links: {
            "Location": "https://maps.app.goo.gl/NF7owiWbUVmFo3EH8"
          }
        },
        {
          name: "Belong",
          type: "cafe",
          neighborhood: "Nuzha",
          price: "$$",
          rating: 4.4,
          cuisine: "Specialty coffee",
          coffee: "Specialty",
          coords: [24.7543424, 46.7066642],
          instagram: "belongcafe.sa",
          overview: {
            "Cuisine": "Specialty coffee",
            "Google Rating": "4.4/5",
            "Avg. Price (SAR)": "50‚Äì100",
            "Hours": "6:00 AM - 2:00 AM (except Friday 9 AM - 2 AM)",
            "Notes": "Offers a variety of drinks in a cozy setting.",
            "Contact": "0551900902"
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/qRfh5Ww8fBrFpkZj8"
          }
        },
        {
          name: "Crops",
          type: "cafe",
          neighborhood: "An Narjis",
          price: "$$",
          rating: 4.5,
          cuisine: "Specialty coffee",
          coffee: "Specialty",
          coords: [24.8415496, 46.6661037],
          instagram: "crops.sa",
          overview: {
            "Cuisine": "Specialty coffee",
            "Google Rating": "4.5/5",
            "Avg. Price (SAR)": "50‚Äì100",
            "Hours": "7:00 AM - 12:00 AM",
            "Notes": "Great place to work or study; offers specialty coffee and a comfortable environment.",
            "Contact": "0544801080"
          },
          reviews: [
            "Perfect for working, super fast WiFi. ‚Äì Noura"
          ],
          links: {
            "Location": "https://maps.app.goo.gl/9iy3k1sCGU2GsgTu8"
          }
        },
        {
          name: "Good Neighbor",
          type: "cafe",
          neighborhood: "Al Olaya",
          price: "$",
          rating: 4.4,
          cuisine: "Cafe",
          coffee: "Specialty",
          coords: [24.7123, 46.6734],
          instagram: "goodneighbor.sa",
          overview: {
            "Cuisine": "Cafe",
            "Google Rating": "4.4/5",
            "Avg. Price (SAR)": "20‚Äì40",
            "Hours": "7:00 AM - 11:30 PM",
            "Notes": "Cozy neighborhood caf√© with great coffee and snacks.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/wC5XTLsAwxgBKnVP9"
          }
        },
        {
          name: "Truth",
          type: "cafe",
          neighborhood: "Alquds",
          price: "$",
          rating: 4.6,
          cuisine: "Specialty Coffee",
          coffee: "Specialty",
          coords: [24.8132, 46.6521],
          instagram: "truthroastery",
          overview: {
            "Cuisine": "Specialty Coffee",
            "Google Rating": "4.6/5",
            "Avg. Price (SAR)": "20‚Äì40",
            "Hours": "6:00 AM - 11:00 PM (except Thursday until 12 AM, Friday 1 PM - 12 AM)",
            "Notes": "Specialty coffee with a focus on quality beans.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/ZdMNza22mzc5DoRc6"
          }
        },
        {
          name: "Some",
          type: "cafe",
          neighborhood: "Almuruj",
          price: "$",
          rating: 4.3,
          cuisine: "Cafe",
          coffee: "Modern",
          coords: [24.8098, 46.6783],
          instagram: "somecoffee.sa",
          overview: {
            "Cuisine": "Cafe",
            "Google Rating": "4.3/5",
            "Avg. Price (SAR)": "20‚Äì40",
            "Hours": "6:00 AM - 11:30 PM",
            "Notes": "Modern caf√© with a great atmosphere.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/q68vfG92z7akphmX7"
          }
        },
        {
          name: "Bab",
          type: "cafe",
          neighborhood: "Al Mohammadiyah",
          price: "$",
          rating: 4.5,
          cuisine: "Cafe",
          coffee: "Trendy",
          coords: [24.6987, 46.6821],
          instagram: "bab.ksa",
          overview: {
            "Cuisine": "Cafe",
            "Google Rating": "4.5/5",
            "Avg. Price (SAR)": "20‚Äì40",
            "Hours": "6:30 AM - 12:00 AM (except Thursday & Friday until 1 AM)",
            "Notes": "Trendy caf√© with great desserts.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/qLArNi6QDm2UAh7v5"
          }
        },
        {
          name: "Ouia",
          type: "cafe",
          neighborhood: "Al Qirawan",
          price: "$",
          rating: 4.4,
          cuisine: "Cafe",
          coffee: "Modern",
          coords: [24.8154, 46.6492],
          instagram: "ouiacafe",
          overview: {
            "Cuisine": "Cafe",
            "Google Rating": "4.4/5",
            "Avg. Price (SAR)": "20‚Äì40",
            "Hours": "6:00 AM - 1:00 AM (except Thursday & Friday until 2 AM)",
            "Notes": "Modern caf√© with a great selection of drinks.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/RUTkVb1ofQgGsQDMA"
          }
        },
        {
          name: "Veni",
          type: "cafe",
          neighborhood: "King Salman",
          price: "$",
          rating: 4.2,
          cuisine: "Cafe",
          coffee: "Specialty",
          coords: [24.7012, 46.6845],
          instagram: "veni.coffee.sa",
          overview: {
            "Cuisine": "Cafe",
            "Google Rating": "4.2/5",
            "Avg. Price (SAR)": "20‚Äì40",
            "Hours": "6:30 AM - 12:00 AM (except Friday & Saturday 8:30 AM - 12 AM)",
            "Notes": "Specialty coffee with a cozy atmosphere.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/DftAgJQGaNvpzFcp8"
          }
        },
        {
          name: "Belmont",
          type: "cafe",
          neighborhood: "Al Mohammadiyah",
          price: "$",
          rating: 4.3,
          cuisine: "Cafe",
          coffee: "Modern",
          coords: [24.8087, 46.6791],
          instagram: "belmont.coffee",
          overview: {
            "Cuisine": "Cafe",
            "Google Rating": "4.3/5",
            "Avg. Price (SAR)": "20‚Äì40",
            "Hours": "6:30 AM - 12:00 AM (except Friday & Saturday 8:30 AM - 12 AM)",
            "Notes": "Modern caf√© with great coffee and pastries.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/mJjftZku34SLr5Km9"
          }
        },
        {
          name: "Da Nonna",
          type: "cafe",
          neighborhood: "Al Nakheel",
          price: "$",
          rating: 4.5,
          cuisine: "Cafe",
          coffee: "Desserts",
          coords: [24.6978, 46.6812],
          instagram: "danonna_sa",
          overview: {
            "Cuisine": "Cafe",
            "Google Rating": "4.5/5",
            "Avg. Price (SAR)": "20‚Äì40",
            "Hours": "8:00 AM - 1:00 AM (except Friday 1:30 PM - 1 AM)",
            "Notes": "Great desserts and coffee in a cozy setting.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/XFvC2BBiYT31B9q1A"
          }
        },
        {
          name: "ORIGIN (The Lab)",
          type: "cafe",
          neighborhood: "Hittin",
          price: "$",
          rating: 4.6,
          cuisine: "Specialty Coffee",
          coffee: "Specialty",
          coords: [24.8145, 46.6532],
          instagram: "originroaster",
          overview: {
            "Cuisine": "Specialty Coffee",
            "Google Rating": "4.6/5",
            "Avg. Price (SAR)": "20‚Äì40",
            "Hours": "6:00 AM - 11:30 PM (except Thursday & Friday until 12 AM)",
            "Notes": "Specialty coffee with a focus on quality and innovation.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/sHfzq6pJmF22TveJ6"
          }
        },
        {
          name: "Atmospher",
          type: "cafe",
          neighborhood: "King Fahd",
          price: "$",
          rating: 4.4,
          cuisine: "Cafe",
          coffee: "Modern",
          coords: [24.8076, 46.6778],
          instagram: "atmosphere.sa",
          overview: {
            "Cuisine": "Cafe",
            "Google Rating": "4.4/5",
            "Avg. Price (SAR)": "20‚Äì40",
            "Hours": "6:00 AM - 1:00 AM (except Thursday & Friday until 2 AM)",
            "Notes": "Modern caf√© with a great atmosphere and drinks.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/xGZUcG41WxCoN9886"
          }
        },
        {
          name: "WATCHhow",
          type: "cafe",
          neighborhood: "Al Mohammadiyah",
          price: "$",
          rating: 4.3,
          cuisine: "Cafe",
          coffee: "Trendy",
          coords: [24.6992, 46.6837],
          instagram: "watchhow.sa",
          overview: {
            "Cuisine": "Cafe",
            "Google Rating": "4.3/5",
            "Avg. Price (SAR)": "20‚Äì40",
            "Hours": "Monday: 8 AM to 11:30 PM ¬∑ Tuesday to Thursday & Saturday to Sunday: 8 AM to 11 PM ¬∑ Friday: 1 PM to 11:30 PM",
            "Notes": "Trendy caf√© with a unique concept.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/jQjF8z8kHhvrucCf8"
          }
        },
        {
          name: "Fav",
          type: "cafe",
          neighborhood: "Al Malqa",
          price: "$",
          rating: 4.5,
          cuisine: "Cafe",
          coffee: "Modern",
          coords: [24.8065, 46.6762],
          instagram: "fav_ksa",
          overview: {
            "Cuisine": "Cafe",
            "Google Rating": "4.5/5",
            "Avg. Price (SAR)": "20‚Äì40",
            "Hours": "6:30 AM - 12:30 AM (except Friday 12:30 PM - 1 AM)",
            "Notes": "Modern caf√© with great coffee and atmosphere.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/cxT1VQA8eKTQ7zMY9"
          }
        },
        {
          name: "The Sift",
          type: "cafe",
          neighborhood: "Hittin",
          price: "$",
          rating: 4.4,
          cuisine: "Specialty Coffee",
          coffee: "Specialty",
          coords: [24.8138, 46.6543],
          instagram: "thesift.sa",
          overview: {
            "Cuisine": "Specialty Coffee",
            "Google Rating": "4.4/5",
            "Avg. Price (SAR)": "20‚Äì40",
            "Hours": "6:00 AM - 11:30 PM (except Friday & Saturday until 12 AM)",
            "Notes": "Specialty coffee with a focus on quality.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/3m1JvcoGx2MvA75t8"
          }
        },
        {
          name: "Green Bottle",
          type: "cafe",
          neighborhood: "Al Malqa",
          price: "$",
          rating: 4.3,
          cuisine: "Cafe",
          coffee: "Modern",
          coords: [24.7005, 46.6851],
          instagram: "greenbottle.sa",
          overview: {
            "Cuisine": "Cafe",
            "Google Rating": "4.3/5",
            "Avg. Price (SAR)": "20‚Äì40",
            "Hours": "7:00 AM - 12:30 AM (except Thursday until 2:30 AM, Friday 1 PM - 2:30 AM)",
            "Notes": "Modern caf√© with a focus on sustainability.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/2y38ovz9o9tNUgGc9"
          }
        },
        {
          name: "Quaint",
          type: "cafe",
          neighborhood: "At Taawun",
          price: "$",
          rating: 4.5,
          cuisine: "Cafe",
          coffee: "Trendy",
          coords: [24.8054, 46.6753],
          instagram: "quaintcoffe.sa",
          overview: {
            "Cuisine": "Cafe",
            "Google Rating": "4.5/5",
            "Avg. Price (SAR)": "20‚Äì40",
            "Hours": "7:00 AM - 1:00 AM (except Friday & Saturday until 2 AM)",
            "Notes": "Trendy caf√© with a cozy atmosphere.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/DHkERs6CPt1jMKp78"
          }
        }
      ],
      restaurants: [
        {
          name: "Signor Sassi",
          type: "restaurant",
          neighborhood: "As Sulimaniyah",
          price: "$$$",
          rating: 4.0,
          cuisine: "Italian fine dining",
          coords: [24.6996837, 46.7045731],
          instagram: "signorsassiriyadh",
          overview: {
            "Cuisine": "Italian fine dining",
            "Google Rating": "4.0/5",
            "Avg. Price (SAR)": "200‚Äì300",
            "Hours": "1:00 PM - 12:30 AM",
            "Notes": "Offers a luxurious dining experience with authentic Italian cuisine.",
            "Contact": "920011877"
          },
          reviews: [
            "Best Italian food in Riyadh. ‚Äì Rami"
          ],
          links: {
            "Location": "https://maps.app.goo.gl/dGpDfo7GKnenYTpB6",
            "Menu": "https://signorsassi.redro.menu/en/restaurant/riyadh/food.html",
            "Reserve": "https://widget.servmeco.com/?oid=1233&source=venue_website"
          }
        },
        {
          name: "Public",
          type: "restaurant",
          neighborhood: "As Sulimaniyah",
          price: "$$",
          rating: 4.5,
          cuisine: "Contemporary cuisine",
          coords: [24.6997594, 46.7039692],
          instagram: "public",
          overview: {
            "Cuisine": "Contemporary cuisine",
            "Google Rating": "4.5/5",
            "Avg. Price (SAR)": "150‚Äì250",
            "Hours": "1:00 PM - 1:00 AM",
            "Notes": "Offers modern dishes in a stylish setting.",
            "Contact": "920024788"
          },
          reviews: [
            "Fusion dishes are top-notch. ‚Äì Laila"
          ],
          links: {
            "Location": "https://maps.app.goo.gl/sLSXzuMY1LjkZdJh8",
            "Menu": "https://thepublicrestaurant.com/wp-content/uploads/2025/02/Public-Menu.pdf",
            "Reserve": "https://web.thechefz.co/reservation/web/create/17011689"
          }
        },
        {
          name: "Beefbar",
          type: "restaurant",
          neighborhood: "As Sulimaniyah",
          price: "$$$",
          rating: 3.8,
          cuisine: "Steakhouse",
          coords: [24.7043124, 46.705969],
          instagram: "beefbar_riyadh",
          overview: {
            "Cuisine": "Steakhouse",
            "Google Rating": "3.8/5",
            "Avg. Price (SAR)": "150‚Äì300",
            "Hours": "1:00 AM - 12:00 AM (Thursday & Friday until 1 AM, closed Monday)",
            "Notes": "Monaco-based steakhouse known for premium wagyu, crab tacos, and Art Deco ambiance.",
            "Contact": "920004146"
          },
          reviews: [
            "Steaks were juicy and perfect! ‚Äì Khalid"
          ],
          links: {
            "Location": "https://maps.app.goo.gl/Yg1XWA4eeBQ2ukou8",
            "Menu": "https://beefbar.com/riyadh-menus/dinner/",
            "Reserve": "https://widget.servmeco.com/?oid=1222&source=venue_website"
          }
        },
        {
          name: "Entrec√¥te Caf√© de Paris",
          type: "restaurant",
          neighborhood: "Al Faisaliah",
          price: "$$$",
          rating: 3.7,
          cuisine: "Swiss steakhouse",
          coords: [24.6900396, 46.6848371],
          instagram: "entrecote.sa",
          overview: {
            "Cuisine": "Swiss steakhouse",
            "Google Rating": "3.7/5",
            "Avg. Price (SAR)": "150‚Äì250",
            "Hours": "Monday‚ÄìWednesday & Sunday: 1 PM to 12:30 AM ¬∑ Thursday: 1 PM to 1:15 AM ¬∑ Friday: 2 PM to 1:15 AM ¬∑ Saturday: 2 PM to 12:30 AM",
            "Notes": "Famous for its signature steak with secret sauce; located in Al Faisaliah Tower.",
            "Contact": "9200 18998"
          },
          reviews: [
            "Loved the secret sauce. ‚Äì Mona"
          ],
          links: {
            "Location": "https://maps.app.goo.gl/z1RiRZ2d2TgVogCm8",
            "Menu": "https://entrecote.sa/en/menu",
            "Reserve": "https://entrecote.sa/en/reservation/website/entrecote-faisaliah-tower/"
          }
        },
        {
          name: "Parker's",
          type: "restaurant",
          neighborhood: "Al Safarat",
          price: "$$",
          rating: 4.4,
          cuisine: "Fusion cuisine",
          coords: [24.6930, 46.6580],
          instagram: "parkers",
          overview: {
            "Cuisine": "Fusion cuisine",
            "Google Rating": "4.4/5",
            "Avg. Price (SAR)": "100‚Äì200",
            "Hours": "8:00 AM - 1:00 AM",
            "Notes": "Known for truffle fries and Matilda Cake; elegant ambiance.",
            "Contact": "920024788"
          },
          reviews: [
            "International menu and great service. ‚Äì Abdullah"
          ],
          links: {
            "Location": "https://maps.app.goo.gl/TuWNCpSzh3A2U6nm7",
            "Menu": "https://linktr.ee/parkersmenu",
            "Reserve": "https://web.thechefz.co/reservation/web/create/5731723"
          }
        },
        {
          name: "Prego",
          type: "restaurant",
          neighborhood: "Qurtuba",
          price: "$$$",
          rating: 4.2,
          cuisine: "Italian",
          coords: [24.6985, 46.6842],
          instagram: "prego.ksa",
          overview: {
            "Cuisine": "Italian",
            "Google Rating": "4.2/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "1:00 PM - 1:00 AM",
            "Notes": "Authentic Italian cuisine in a stylish setting.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/oK17YtNfFoAhjKJ66"
          }
        },
        {
          name: "California Burger",
          type: "restaurant",
          neighborhood: "Al Malqa",
          price: "$",
          rating: 4.3,
          cuisine: "American",
          coords: [24.8123, 46.6514],
          instagram: "thecaliforniaburger",
          overview: {
            "Cuisine": "American",
            "Google Rating": "4.3/5",
            "Avg. Price (SAR)": "40‚Äì60",
            "Hours": "1:00 PM - 2:00 AM",
            "Notes": "Classic American burgers and fries.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/6atispsGGwRm4rqM7"
          }
        },
        {
          name: "Nashvilles Cuisine",
          type: "restaurant",
          neighborhood: "Al Malqa",
          price: "$",
          rating: 4.1,
          cuisine: "American",
          coords: [24.8072, 46.6785],
          instagram: "nashvilles.sa",
          overview: {
            "Cuisine": "American",
            "Google Rating": "4.1/5",
            "Avg. Price (SAR)": "40‚Äì60",
            "Hours": "1:30 PM - 2:00 AM (Thursday & Friday until 3 AM)",
            "Notes": "American-style cuisine with a focus on Southern flavors.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/EiKJYzm5bbt7bweFA"
          }
        },
        {
          name: "Myazu",
          type: "restaurant",
          neighborhood: "As Sulimaniyah",
          price: "$$$",
          rating: 4.5,
          cuisine: "Japanese",
          coords: [24.6972, 46.6825],
          instagram: "myazusaudi",
          overview: {
            "Cuisine": "Japanese",
            "Google Rating": "4.5/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "1:00 PM - 12:00 AM (Thursday & Friday until 1 AM)",
            "Notes": "Authentic Japanese cuisine with a modern twist.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/RXaEm7yiyHZ5Xx3g6"
          }
        },
        {
          name: "AOK",
          type: "restaurant",
          neighborhood: "Alaqiq",
          price: "$$$",
          rating: 4.4,
          cuisine: "International",
          coords: [24.7142, 46.6761],
          instagram: "aokkitchensaudi",
          overview: {
            "Cuisine": "International",
            "Google Rating": "4.4/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "8:00 AM - 10:00 PM (Friday & Saturday until 11 PM)",
            "Notes": "International cuisine with a focus on quality ingredients.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/ANWss3N59SQHj6hB7"
          }
        },
        {
          name: "II Baretto",
          type: "restaurant",
          neighborhood: "Alaqiq",
          price: "$$$",
          rating: 4.3,
          cuisine: "Italian",
          coords: [24.6998, 46.6832],
          instagram: "ilbarettosa",
          overview: {
            "Cuisine": "Italian",
            "Google Rating": "4.3/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "12:30 PM - 12:00 AM",
            "Notes": "Authentic Italian cuisine in a cozy setting.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/35YU4DfEraXhNDEb9"
          }
        },
        {
          name: "Los Bandidos Riyadh",
          type: "restaurant",
          neighborhood: "As Sulimaniyah",
          price: "$$$",
          rating: 4.2,
          cuisine: "French, Italian, Spanish",
          coords: [24.8063, 46.6774],
          instagram: "losbandidos_ksa",
          overview: {
            "Cuisine": "French, Italian, Spanish",
            "Google Rating": "4.2/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "12:00 PM - 12:00 AM (Friday 1 PM - 2 AM, Saturday 12 PM - 2 AM)",
            "Notes": "European cuisine with a focus on Mediterranean flavors.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/VT9p3a3v9Sw3PBk19"
          }
        },
        {
          name: "Memos",
          type: "restaurant",
          neighborhood: "Al-Rabea",
          price: "$$$",
          rating: 4.3,
          cuisine: "Italian",
          coords: [24.8135, 46.6528],
          instagram: "memos.ksa",
          overview: {
            "Cuisine": "Italian",
            "Google Rating": "4.3/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "12:00 PM - 12:00 AM (Wednesday, Thursday & Friday until 1 AM)",
            "Notes": "Authentic Italian cuisine with a modern twist.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/U5p9zRpnwtu8D3RB7"
          }
        },
        {
          name: "Bagatelle",
          type: "restaurant",
          neighborhood: "Umm Al Hamam Al Gharbi",
          price: "$$$",
          rating: 4.5,
          cuisine: "French",
          coords: [24.6981, 46.6818],
          instagram: "bagatelleriyadh",
          overview: {
            "Cuisine": "French",
            "Google Rating": "4.5/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "1:00 PM - 12:00 AM (Thursday & Friday until 1 AM)",
            "Notes": "Authentic French cuisine in an elegant setting.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/Yb7p1hZutfPZhZTTA"
          }
        },
        {
          name: "Crazy Pizza",
          type: "restaurant",
          neighborhood: "As Sulimaniyah",
          price: "$$$",
          rating: 4.1,
          cuisine: "Italian",
          coords: [24.8057, 46.6765],
          instagram: "crazypizza.saudi",
          overview: {
            "Cuisine": "Italian",
            "Google Rating": "4.1/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "1:00 PM - 12:00 AM (Thursday & Friday until 1 AM)",
            "Notes": "Authentic Italian pizza with creative toppings.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/yZmqKUM1MqXZCeqM6"
          }
        },
        {
          name: "Cipriani",
          type: "restaurant",
          neighborhood: "Hittin",
          price: "$$$",
          rating: 4.6,
          cuisine: "Italian",
          coords: [24.7139, 46.6758],
          instagram: "ciprianiriyadh",
          overview: {
            "Cuisine": "Italian",
            "Google Rating": "4.6/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "1:00 PM - 12:30 AM",
            "Notes": "Luxury Italian dining with impeccable service.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/C9hiZDvwmk8Jx5mg8"
          }
        },
        {
          name: "Santini",
          type: "restaurant",
          neighborhood: "Umm Al Hamam Al Gharbi",
          price: "$$$",
          rating: 4.4,
          cuisine: "Italian",
          coords: [24.6995, 46.6829],
          instagram: "santini.riyadh",
          overview: {
            "Cuisine": "Italian",
            "Google Rating": "4.4/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "1:00 PM - 12:00 AM (Thursday & Friday until 1 AM)",
            "Notes": "Authentic Italian cuisine with a focus on fresh ingredients.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/st5Fc3RDzuuRQR358"
          }
        },
        {
          name: "Le Masho",
          type: "restaurant",
          neighborhood: "Al Safarat",
          price: "$$$",
          rating: 4.3,
          cuisine: "French",
          coords: [24.8048, 46.6759],
          instagram: "lemaschou_sa",
          overview: {
            "Cuisine": "French",
            "Google Rating": "4.3/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "2:30 PM - 12:30 AM",
            "Notes": "Authentic French cuisine with a modern twist.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/VD5qBsdvVXvjC8SD6"
          }
        },
        {
          name: "San Carlo Cicchetti",
          type: "restaurant",
          neighborhood: "As Sulimaniyah",
          price: "$$$",
          rating: 4.5,
          cuisine: "Italian",
          coords: [24.8128, 46.6531],
          instagram: "cicchettisaudi",
          overview: {
            "Cuisine": "Italian",
            "Google Rating": "4.5/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "1:00 PM - 1:00 AM",
            "Notes": "Authentic Italian cuisine with a focus on sharing plates.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/YHoqfcwoC73UkRbh9"
          }
        },
        {
          name: "Morini Riyadh",
          type: "restaurant",
          neighborhood: "Hittin",
          price: "$$$",
          rating: 4.4,
          cuisine: "New York-style Italian",
          coords: [24.6979, 46.6815],
          instagram: "moriniriyadh",
          overview: {
            "Cuisine": "New York-style Italian",
            "Google Rating": "4.4/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "7:00 AM - 11:00 AM, 12:00 PM - 12:00 AM",
            "Notes": "New York-style Italian cuisine with a modern twist.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/rgzMVFiXkNBxXTaA7"
          }
        },
        {
          name: "Sumosan",
          type: "restaurant",
          neighborhood: "Umm Al Hamam Al Gharbi",
          price: "$$$",
          rating: 4.6,
          cuisine: "Japanese",
          coords: [24.8039, 46.6752],
          instagram: "sumosan.riyadh",
          overview: {
            "Cuisine": "Japanese",
            "Google Rating": "4.6/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "1:00 PM - 12:00 AM (Thursday & Friday until 1 AM)",
            "Notes": "Authentic Japanese cuisine with a focus on sushi and sashimi.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/KBYSUp4VLJRzD6in7"
          }
        },
        {
          name: "La Petite Maison (LPM) Riyadh",
          type: "restaurant",
          neighborhood: "Al Olaya",
          price: "$$$",
          rating: 4.7,
          cuisine: "French",
          coords: [24.7145, 46.6764],
          instagram: "lpmriyadh",
          overview: {
            "Cuisine": "French",
            "Google Rating": "4.7/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "12:30‚Äì3:30 PM, 6:30‚Äì11:30 PM (Thursday: 12:30‚Äì4 PM, 6:30‚Äì11:30 PM)",
            "Notes": "Authentic French cuisine with a focus on Mediterranean flavors.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/7TKpushG8RtUrvQJ8"
          }
        },
        {
          name: "MR CHOW Riyadh",
          type: "restaurant",
          neighborhood: "Alaqiq",
          price: "$$$",
          rating: 4.3,
          cuisine: "Chinese",
          coords: [24.8121, 46.6525],
          instagram: "mrchowriyadh",
          overview: {
            "Cuisine": "Chinese",
            "Google Rating": "4.3/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "12:00 PM - 11:30 PM",
            "Notes": "Authentic Chinese cuisine with a modern twist.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/8vqNZBkYAWVgpagDA"
          }
        },
        {
          name: "MNKY HSE",
          type: "restaurant",
          neighborhood: "Hittin",
          price: "$$$",
          rating: 4.2,
          cuisine: "Latin American",
          coords: [24.8042, 46.6756],
          instagram: "mnkyhseksa",
          overview: {
            "Cuisine": "Latin American",
            "Google Rating": "4.2/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "6:30 PM‚Äì1 AM (Thursday & Friday until 2 AM, closed Sunday)",
            "Notes": "Latin American cuisine with a focus on bold flavors.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/x4W3LsRjxebLw6Pr9"
          }
        },
        {
          name: "Oulu",
          type: "restaurant",
          neighborhood: "As Sulimaniyah",
          price: "$$$",
          rating: 4.4,
          cuisine: "Italian",
          coords: [24.6988, 46.6822],
          instagram: "oulu.sa",
          overview: {
            "Cuisine": "Italian",
            "Google Rating": "4.4/5",
            "Avg. Price (SAR)": "200+",
            "Hours": "1:00 PM - 1:00 AM (Thursday & Friday until 2 AM)",
            "Notes": "Authentic Italian cuisine with a modern twist.",
            "Contact": ""
          },
          reviews: [],
          links: {
            "Location": "https://maps.app.goo.gl/9M5yapYhaP2Vw3xW9"
          }
        }
      ],
      events: [
        {
          name: "The Saudi Food Show",
          type: "event",
          category: "Food",
          coords: [24.8034, 46.6572],
          date: "2025-05-12T00:00:00",
          overview: {
            "Dates": "May 12‚Äì14, 2025",
            "Venue": "Riyadh Front Exhibition & Conference Centre",
            "Ticket Price (SAR)": "150 (3-day pass)",
            "Hours": "2:00 PM - 10:00 PM",
            "Notes": "The largest F&B sourcing event in Saudi Arabia, uniting global industry players."
          },
          description: "Showcasing the best food from around the world.",
          links: {
            "Location": "https://maps.app.goo.gl/PyGnen7vPcfF4YAL8",
            "Contact": "https://www.thesaudifoodshow.com/contact"
          }
        },
        {
          name: "Smart Data & AI Summit",
          type: "event",
          category: "Lifestyle",
          coords: [24.7538, 46.6525],
          date: "2025-05-05T00:00:00",
          overview: {
            "Dates": "May 5‚Äì6, 2025",
            "Venue": "JW Marriott Hotel Riyadh",
            "Ticket Price (SAR)": "Free!",
            "Hours": "9:00 AM - 6:00 PM",
            "Notes": "A premier gathering of over 300 data and AI professionals."
          },
          description: "The region's largest data & AI conference.",
          links: {
            "Location": "https://maps.app.goo.gl/QevWrwNShHQgZRbGA",
            "Contact": "0115117777"
          }
        },
        {
          name: "Global Project Management Forum (GPMF)",
          type: "event",
          category: "Lifestyle",
          coords: [24.6620, 46.6740],
          date: "2025-05-17T00:00:00",
          overview: {
            "Dates": "May 17‚Äì19, 2025",
            "Venue": "Fairmont Hotel, Riyadh",
            "Ticket Price (SAR)": "Free (Forum & Exhibition), 1000 + VAT (Workshops & Masterclasses)",
            "Hours": "Time not specified",
            "Notes": "The largest project management forum in the MENA region."
          },
          description: "Global thought-leadership in project management.",
          links: {
            "Location": "https://maps.app.goo.gl/1ggjkq7ZKhiWxKY89",
            "Contact": "+966 54 409 6764"
          }
        },
        {
          name: "Canelo Alvarez vs. William Scull ‚Äì Fatal Fury PPV",
          type: "event",
          category: "Sports",
          coords: [24.7230, 46.6700],
          date: "2025-05-03T00:00:00",
          overview: {
            "Dates": "May 3, 2025",
            "Venue": "ANB Arena, Riyadh",
            "Ticket Price (SAR)": "80 - 800",
            "Hours": "Time not specified",
            "Notes": "A super-middleweight title unification bout."
          },
          description: "The biggest boxing event of the year.",
          links: {
            "Location": "",
            "Contact": "920035043"
          }
        },
        {
          name: "Saudi Entertainment & Amusement Expo 2025",
          type: "event",
          category: "Expo",
          coords: [24.8034, 46.6572],
          date: "2025-05-20T00:00:00",
          overview: {
            "Dates": "May 20‚Äì22, 2025",
            "Venue": "Riyadh Front Exhibition & Conference Centre",
            "Ticket Price (SAR)": "Free!",
            "Hours": "3:00 PM - 9:00 PM",
            "Notes": "The region's leading platform for the entertainment and amusement industry."
          },
          description: "Discover the future of entertainment and amusement industries.",
          links: {
            "Location": "https://maps.app.goo.gl/1xdPicmawR7HwPBb8",
            "Contact": "marketing@saudientertainmentexpo.com"
          }
        }
      ]
    };

    // Initialize the application
    document.addEventListener('DOMContentLoaded', function() {
      // Create a simple notification system
      window.notyf = new Notyf({
        duration: 3000,
        position: {
          x: 'right',
          y: 'top',
        },
        types: [
          {
            type: 'success',
            background: 'var(--success)',
            icon: {
              className: 'fas fa-check-circle',
              tagName: 'i'
            }
          },
          {
            type: 'error',
            background: 'var(--danger)',
            icon: {
              className: 'fas fa-times-circle',
              tagName: 'i'
            }
          },
          {
            type: 'info',
            background: 'var(--info)',
            icon: {
              className: 'fas fa-info-circle',
              tagName: 'i'
            }
          }
        ]
      });
      
      // Initialize theme from preferences
      initializeTheme();
      
      // Setup UI components
      setupMultiselect();
      setupPriceRange();
      setupLocationServices();
      
      // Initialize data and interactions
      renderCards();
      initMap();
      setupFilters();
      setupQuickFilters();
      setupNavigation();
      updateCountdowns();
      setInterval(updateCountdowns, 1000);
      setupThemeToggle();
      setupNewsletter();
      
      // Show welcome notification
      setTimeout(() => {
        window.notyf.open({
          type: 'info',
          message: 'Welcome to MYRIYADH! Try out our new "Open Now" filter to find venues that are currently open.'
        });
      }, 1000);
    });

    // Theme initialization based on user preferences
    function initializeTheme() {
      if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.setAttribute('data-theme', 'dark');
        const themeToggle = document.getElementById('theme-toggle');
        if (themeToggle) {
          themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }
      }
    }

    // Multi-select component initialization
    function setupMultiselect() {
      const multiselect = document.getElementById('cuisine-multiselect');
      if (!multiselect) return;
      
      const header = multiselect.querySelector('.multi-select-header');
      const dropdown = multiselect.querySelector('.multi-select-dropdown');
      const options = multiselect.querySelectorAll('.multi-select-option');
      const placeholder = multiselect.querySelector('.multi-select-placeholder');
      
      // Toggle dropdown
      header.addEventListener('click', () => {
        dropdown.classList.toggle('open');
      });
      
      // Close dropdown when clicking outside
      document.addEventListener('click', (e) => {
        if (!multiselect.contains(e.target)) {
          dropdown.classList.remove('open');
        }
      });
      
      // Handle option selection
      options.forEach(option => {
        option.addEventListener('click', () => {
          option.classList.toggle('selected');
          
          // Update selected cuisines array
          selectedCuisines = Array.from(multiselect.querySelectorAll('.multi-select-option.selected'))
            .map(el => el.dataset.value);
          
          // Update header text
          if (selectedCuisines.length === 0) {
            placeholder.textContent = 'All Cuisines';
          } else if (selectedCuisines.length === 1) {
            placeholder.textContent = selectedCuisines[0];
          } else {
            placeholder.textContent = `${selectedCuisines.length} cuisines selected`;
          }
          
          option.querySelector('.multi-select-checkbox').innerHTML = 
            option.classList.contains('selected') ? '<i class="fas fa-check"></i>' : '';
        });
      });
    }

    // Price range slider setup
    function setupPriceRange() {
      const priceRange = document.getElementById('price-range');
      if (!priceRange) return;
      
      // Update the price value displays
      priceRange.addEventListener('input', () => {
        // The range goes from 1 to 3, representing $ to $$$
        const value = priceRange.value;
        
        // Visual feedback as user drags the slider
        const priceLabels = document.querySelector('.price-labels').children;
        for (let i = 0; i < priceLabels.length; i++) {
          if (i < value) {
            priceLabels[i].style.fontWeight = '600';
            priceLabels[i].style.color = 'var(--primary)';
          } else {
            priceLabels[i].style.fontWeight = '400';
            priceLabels[i].style.color = 'var(--text-light)';
          }
        }
      });
    }

    // Location services setup
    function setupLocationServices() {
      // Show location container if geolocation is available
      if ('geolocation' in navigator) {
        document.getElementById('location-container').classList.remove('hidden');
        
        // Setup location button
        const locationBtn = document.getElementById('get-location');
        locationBtn.addEventListener('click', getUserLocation);
        
        // Setup sort by distance button
        const sortDistanceBtn = document.getElementById('sort-distance');
        sortDistanceBtn.addEventListener('click', function() {
          if (!userLocation) {
            getUserLocation().then(() => {
              toggleSortByDistance();
            });
          } else {
            toggleSortByDistance();
          }
        });
      }
    }

    // Get user's location
    function getUserLocation() {
      return new Promise((resolve, reject) => {
        const locationBtn = document.getElementById('get-location');
        const sortDistanceBtn = document.getElementById('sort-distance');
        
        // Show loading state
        locationBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Getting location...';
        
        navigator.geolocation.getCurrentPosition(
          (position) => {
            // Store user coordinates
            userLocation = [position.coords.latitude, position.coords.longitude];
            
            // Update UI
            locationBtn.innerHTML = '<i class="fas fa-check-circle"></i> Location updated';
            sortDistanceBtn.classList.add('visible');
            
            // Show success notification
            window.notyf.success('Location successfully updated! You can now sort venues by distance.');
            
            // Calculate distances for all venues
            calculateDistances();
            
            // Center map on user location
            if (window.riyadhMap) {
              const userMarker = L.marker(userLocation, {
                icon: L.divIcon({
                  className: 'user-location-marker',
                  html: `<div style="
                    width: 24px;
                    height: 24px;
                    background-color: #3b82f6;
                    border-radius: 50%;
                    border: 2px solid white;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    color: white;
                    font-weight: bold;
                    font-size: 12px;
                    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
                  ">
                    <i class="fas fa-user"></i>
                  </div>`,
                  iconSize: [24, 24],
                  iconAnchor: [12, 12]
                })
              }).addTo(window.riyadhMap);
              
              userMarker.bindPopup("<b>You are here</b>").openPopup();
              window.riyadhMap.setView(userLocation, 12);
              
              // Store user marker for later reference
              window.userMarker = userMarker;
            }
            
            resolve(userLocation);
          },
          (error) => {
            // Handle errors
            locationBtn.innerHTML = '<i class="fas fa-location-arrow"></i> Use My Location';
            
            let errorMessage = 'Unable to retrieve your location.';
            switch(error.code) {
              case error.PERMISSION_DENIED:
                errorMessage = 'Location access was denied. Please enable location services to use this feature.';
                break;
              case error.POSITION_UNAVAILABLE:
                errorMessage = 'Location information is unavailable at this time.';
                break;
              case error.TIMEOUT:
                errorMessage = 'The request to get your location timed out.';
                break;
              case error.UNKNOWN_ERROR:
                errorMessage = 'An unknown error occurred while retrieving your location.';
                break;
            }
            
            window.notyf.error(errorMessage);
            reject(error);
          },
          {
            enableHighAccuracy: true,
            timeout: 10000,
            maximumAge: 0
          }
        );
      });
    }

    // Calculate distances from user to all venues
    function calculateDistances() {
      if (!userLocation) return;
      
      // Function to calculate distance between two coordinates in km
      function getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {
        const R = 6371; // Radius of the earth in km
        const dLat = deg2rad(lat2 - lat1);
        const dLon = deg2rad(lon2 - lon1); 
        const a = 
          Math.sin(dLat/2) * Math.sin(dLat/2) +
          Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * 
          Math.sin(dLon/2) * Math.sin(dLon/2)
          ; 
        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
        const d = R * c; // Distance in km
        return d;
      }
      
      function deg2rad(deg) {
        return deg * (Math.PI/180)
      }
      
      // Calculate and store distances for each venue
      [...data.cafes, ...data.restaurants, ...data.events].forEach(venue => {
        if (venue.coords) {
          venue.distance = getDistanceFromLatLonInKm(
            userLocation[0], userLocation[1],
            venue.coords[0], venue.coords[1]
          );
        }
      });
      
      // Update distance displays on cards
      document.querySelectorAll('.card[data-coords]').forEach(card => {
        const coords = card.dataset.coords.split(',').map(Number);
        const distance = getDistanceFromLatLonInKm(
          userLocation[0], userLocation[1],
          coords[0], coords[1]
        );
        
        // Find or create distance element
        let distanceEl = card.querySelector('.card-distance');
        if (!distanceEl) {
          distanceEl = document.createElement('div');
          distanceEl.className = 'card-distance';
          card.appendChild(distanceEl);
        }
        
        // Update distance text
        distanceEl.innerHTML = `
          <i class="fas fa-map-marker-alt"></i>
          ${distance.toFixed(1)} km
        `;
        
        // Show distance badge
        distanceEl.classList.add('visible');
      });
    }

    // Toggle sort by distance
    function toggleSortByDistance() {
      const sortDistanceBtn = document.getElementById('sort-distance');
      
      // Toggle active state
      isSortByDistanceActive = !isSortByDistanceActive;
      sortDistanceBtn.classList.toggle('active', isSortByDistanceActive);
      
      // Apply filtering and sorting
      applyFilters();
      
      // Notification feedback
      if (isSortByDistanceActive) {
        window.notyf.success('Venues are now sorted by distance from your location.');
      }
    }

    // Favorites management - using in-memory storage
    function toggleFavorite(type, name) {
      const index = userFavorites.findIndex(fav => fav.type === type && fav.name === name);
      if (index === -1) {
        userFavorites.push({ type, name });
        window.notyf.success(`Added ${name} to your favorites!`);
      } else {
        userFavorites.splice(index, 1);
        window.notyf.info(`Removed ${name} from your favorites`);
      }
      
      // Update favorites section if visible
      if (document.getElementById('favorites').style.display !== 'none') {
        renderFavorites();
      }
      
      // Update heart icons across all sections
      document.querySelectorAll(`.card[data-type="${type}"][data-name="${name}"] .favorite-btn`).forEach(btn => {
        btn.classList.toggle('active', isFavorite(type, name));
      });
    }

    function isFavorite(type, name) {
      return userFavorites.some(fav => fav.type === type && fav.name === name);
    }

    function renderFavorites() {
      const favoritesList = document.getElementById('favorites-list');
      if (!favoritesList) return;
      
      favoritesList.innerHTML = '';
      
      if (userFavorites.length === 0) {
        favoritesList.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: var(--text-light); padding: 40px 0;">No favorites yet. Click the heart icon on any venue or event to add it here.</p>';
        return;
      }
      
      userFavorites.forEach(fav => {
        let item;
        if (fav.type === 'cafe') {
          item = data.cafes.find(cafe => cafe.name === fav.name);
        } else if (fav.type === 'restaurant') {
          item = data.restaurants.find(restaurant => restaurant.name === fav.name);
        } else {
          item = data.events.find(event => event.name === fav.name);
        }
        
        if (item) {
          const card = createCard(item);
          favoritesList.appendChild(card);
        }
      });
    }

    // Check if a venue is currently open - improved with Riyadh time
    function isOpenNow(venue) {
      if (!venue.overview || !venue.overview.Hours) return false;

      // Get current time info in Riyadh (UTC+3)
      const now = new Date();
      
      // Convert to Riyadh time (UTC+3)
      const riyadhTime = new Date(now.getTime() + (3 * 60 * 60 * 1000 - now.getTimezoneOffset() * 60 * 1000));
      const dayOfWeek = riyadhTime.getDay(); // 0 = Sunday, 1 = Monday, etc.
      const hour = riyadhTime.getHours();
      const minute = riyadhTime.getMinutes();
      const currentTime = hour + minute / 60; // Convert to decimal hours

      // Parse the hours string
      const hoursText = venue.overview.Hours;
      
      // Check if it's "Open 24 hours"
      if (hoursText.toLowerCase().includes('open 24')) {
        // Check if there's an exception for today
        const daysMap = {
          'Monday': 1, 'Tuesday': 2, 'Wednesday': 3, 'Thursday': 4, 
          'Friday': 5, 'Saturday': 6, 'Sunday': 0
        };
        
        for (const [day, dayNum] of Object.entries(daysMap)) {
          // Check if today is mentioned as an exception
          if (dayOfWeek === dayNum && 
              hoursText.toLowerCase().includes(`except ${day.toLowerCase()}`)) {
            // This is an exception day - need to check the exception hours
            const exceptionPattern = new RegExp(`except[^,]*${day}[^\\d]+(\\d+(?::\\d+)?\\s*(?:AM|PM)[^\\d]+\\d+(?::\\d+)?\\s*(?:AM|PM))`, 'i');
            const match = hoursText.match(exceptionPattern);
            
            if (match) {
              // Parse the exception hours
              return isWithinTimeRange(match[1], currentTime);
            }
            return false; // Can't determine exception hours - assume closed
          }
        }
        
        return true; // 24 hours open and no exception for today
      }
      
      // Check if today has special hours
      let todayHours = hoursText;
      const daysMap = {
        'Monday': 1, 'Tuesday': 2, 'Wednesday': 3, 'Thursday': 4, 
        'Friday': 5, 'Saturday': 6, 'Sunday': 0
      };
      
      // Look for day-specific patterns
      for (const [day, dayNum] of Object.entries(daysMap)) {
        if (dayOfWeek === dayNum && hoursText.includes(day)) {
          // Extract this day's hours
          const dayPattern = new RegExp(`${day}[^\\d]+(\\d+(?::\\d+)?\\s*(?:AM|PM)[^\\d]+\\d+(?::\\d+)?\\s*(?:AM|PM))`, 'i');
          const match = hoursText.match(dayPattern);
          if (match) {
            todayHours = match[1];
            break;
          }
        }
      }
      
      // Check for day exclusions (e.g., "except Friday")
      if (hoursText.includes('except')) {
        for (const [day, dayNum] of Object.entries(daysMap)) {
          if (dayOfWeek === dayNum && hoursText.toLowerCase().includes(`except ${day.toLowerCase()}`)) {
            // This day is excluded, check if there's a separate time range
            const dayPattern = new RegExp(`except[^,]+${day}[^\\d]+(\\d+(?::\\d+)?\\s*(?:AM|PM)[^\\d]+\\d+(?::\\d+)?\\s*(?:AM|PM))`, 'i');
            const match = hoursText.match(dayPattern);
            if (match) {
              todayHours = match[1];
              break;
            } else {
              // If no specific hours for excluded day, assume closed
              return false;
            }
          }
        }
      }
      
      // Check for "closed Monday", etc.
      for (const [day, dayNum] of Object.entries(daysMap)) {
        if (dayOfWeek === dayNum && hoursText.toLowerCase().includes(`closed ${day.toLowerCase()}`)) {
          return false;
        }
      }
      
      return isWithinTimeRange(todayHours, currentTime);
    }
    
    function isWithinTimeRange(timeRangeStr, currentTime) {
      // Extract opening and closing times
      const timePattern = /(\d+(?::\d+)?\s*(?:AM|PM))\s*-\s*(\d+(?::\d+)?\s*(?:AM|PM))/i;
      const match = timeRangeStr.match(timePattern);
      
      if (!match) return false; // Can't parse hours format
      
      const openingStr = match[1];
      const closingStr = match[2];
      
      // Convert times to 24-hour decimal format
      function parseTime(timeStr) {
        const [time, meridiem] = timeStr.split(/\s+/);
        let [hours, minutes = 0] = time.split(':').map(Number);
        
        if (meridiem.toLowerCase() === 'pm' && hours < 12) {
          hours += 12;
        } else if (meridiem.toLowerCase() === 'am' && hours === 12) {
          hours = 0;
        }
        
        return hours + minutes / 60;
      }
      
      const openingTime = parseTime(openingStr);
      let closingTime = parseTime(closingStr);
      
      // Handle after-midnight closing times
      if (closingTime < openingTime) {
        closingTime += 24;
      }
      
      // Check if current time is within opening hours
      if (openingTime <= currentTime && currentTime < closingTime) {
        return true;
      } else if (closingTime > 24 && currentTime < (closingTime - 24)) {
        // Handle after-midnight current time
        return true;
      }
      
      return false;
    }

    function renderCards(filteredData = null) {
      const cafesList = document.getElementById('cafes-list');
      const restaurantsList = document.getElementById('restaurants-list');
      const eventsList = document.getElementById('events-list');
      
      if (!cafesList || !restaurantsList || !eventsList) return;
      
      cafesList.innerHTML = '';
      restaurantsList.innerHTML = '';
      eventsList.innerHTML = '';
      
      let cafesData = filteredData ? filteredData.cafes : data.cafes;
      let restaurantsData = filteredData ? filteredData.restaurants : data.restaurants;
      let eventsData = filteredData ? filteredData.events : data.events;
      
      // Sort by distance if enabled
      if (isSortByDistanceActive && userLocation) {
        cafesData = [...cafesData].sort((a, b) => a.distance - b.distance);
        restaurantsData = [...restaurantsData].sort((a, b) => a.distance - b.distance);
        eventsData = [...eventsData].sort((a, b) => a.distance - b.distance);
      }
      
      if (cafesData.length === 0) {
        cafesList.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: var(--text-light); padding: 30px 0;">No caf√©s match your filters.</p>';
      } else {
        cafesData.forEach(cafe => {
          cafesList.appendChild(createCard(cafe));
        });
      }
      
      if (restaurantsData.length === 0) {
        restaurantsList.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: var(--text-light); padding: 30px 0;">No restaurants match your filters.</p>';
      } else {
        restaurantsData.forEach(restaurant => {
          restaurantsList.appendChild(createCard(restaurant));
        });
      }
      
      if (eventsData.length === 0) {
        eventsList.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: var(--text-light); padding: 30px 0;">No events match your filters.</p>';
      } else {
        eventsData.forEach(event => {
          eventsList.appendChild(createCard(event));
        });
      }
      
      updateMapMarkers();
    }

    function createCard(item) {
      const card = document.createElement('div');
      card.className = 'card';
      card.dataset.type = item.type;
      card.dataset.name = item.name;
      if (item.neighborhood) card.dataset.neighborhood = item.neighborhood;
      if (item.price) card.dataset.price = item.price;
      if (item.rating) card.dataset.rating = item.rating;
      if (item.cuisine) card.dataset.cuisine = item.cuisine;
      if (item.coffee) card.dataset.coffee = item.coffee;
      if (item.category) card.dataset.category = item.category;
      if (item.coords) card.dataset.coords = item.coords.join(',');
      if (item.date) card.dataset.date = item.date;
      if (item.distance) card.dataset.distance = item.distance;
      
      // Add favorite button
      const favoriteBtn = document.createElement('button');
      favoriteBtn.className = 'favorite-btn';
      if (isFavorite(item.type, item.name)) {
        favoriteBtn.classList.add('active');
      }
      favoriteBtn.innerHTML = '<i class="fas fa-heart"></i>';
      favoriteBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        toggleFavorite(item.type, item.name);
      });
      card.appendChild(favoriteBtn);
      
      // Add open status for venues (not events)
      if (item.type !== 'event') {
        const isOpen = isOpenNow(item);
        const openStatus = document.createElement('div');
        openStatus.className = `open-status ${isOpen ? 'open' : 'closed'}`;
        openStatus.innerHTML = isOpen ? 
          '<i class="fas fa-door-open"></i> Open Now' : 
          '<i class="fas fa-door-closed"></i> Closed';
        card.appendChild(openStatus);
      }
      
      // Add distance badge if user location is available
      if (userLocation && item.coords) {
        const distance = calculateDistance(
          userLocation[0], userLocation[1],
          item.coords[0], item.coords[1]
        );
        
        const distanceBadge = document.createElement('div');
        distanceBadge.className = 'card-distance visible';
        distanceBadge.innerHTML = `<i class="fas fa-map-marker-alt"></i> ${distance.toFixed(1)} km`;
        card.appendChild(distanceBadge);
        
        // Store the distance on the item for sorting
        item.distance = distance;
      }
      
      const cardHeader = document.createElement('div');
      cardHeader.className = 'card-header';
      
      const cardTitle = document.createElement('h3');
      cardTitle.className = 'card-title';
      cardTitle.textContent = item.name;
      
      const cardTag = document.createElement('span');
      cardTag.className = 'card-tag';
      if (item.type === 'cafe') {
        cardTag.textContent = 'Caf√©';
      } else if (item.type === 'restaurant') {
        cardTag.textContent = 'Restaurant';
      } else {
        cardTag.textContent = 'Event';
      }
      
      cardHeader.appendChild(cardTitle);
      cardHeader.appendChild(cardTag);
      
      const cardBody = document.createElement('div');
      cardBody.className = 'card-body';
      
      const table = document.createElement('table');
      table.className = 'card-table';
      
      for (const [key, value] of Object.entries(item.overview)) {
        const row = document.createElement('tr');
        const th = document.createElement('th');
        th.textContent = key;
        const td = document.createElement('td');
        td.textContent = value;
        row.appendChild(th);
        row.appendChild(td);
        table.appendChild(row);
      }
      
      cardBody.appendChild(table);
      
      if (item.rating) {
        const ratingDiv = document.createElement('div');
        ratingDiv.className = 'card-rating';
        
        for (let i = 1; i <= 5; i++) {
          const star = document.createElement('span');
          star.className = 'star' + (i <= Math.round(item.rating) ? '' : ' inactive');
          star.innerHTML = '‚òÖ';
          ratingDiv.appendChild(star);
        }
        
        cardBody.appendChild(ratingDiv);
      }
      
      if (item.reviews && item.reviews.length > 0) {
        const reviewsTitle = document.createElement('p');
        reviewsTitle.textContent = 'Reviews:';
        reviewsTitle.style.marginTop = '1rem';
        reviewsTitle.style.fontWeight = '500';
        
        cardBody.appendChild(reviewsTitle);
        
        const reviewsList = document.createElement('ul');
        reviewsList.className = 'card-reviews';
        
        item.reviews.forEach(review => {
          const li = document.createElement('li');
          li.textContent = review;
          reviewsList.appendChild(li);
        });
        
        cardBody.appendChild(reviewsList);
      }
      
      if (item.date) {
        const countdown = document.createElement('div');
        countdown.className = 'countdown';
        countdown.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <polyline points="12 6 12 12 16 14"></polyline>
          </svg>
          <span class="countdown-text"></span>
        `;
        cardBody.appendChild(countdown);
      }
      
      const socialShare = document.createElement('div');
      socialShare.className = 'social-share';
      
      // Add Instagram link if available
      if (item.instagram) {
        const instagramBtn = document.createElement('a');
        instagramBtn.className = 'social-btn instagram';
        instagramBtn.innerHTML = '<i class="fab fa-instagram"></i>';
        instagramBtn.href = `https://www.instagram.com/${item.instagram}/`;
        instagramBtn.target = '_blank';
        instagramBtn.title = `Visit ${item.name} on Instagram`;
        
        socialShare.appendChild(instagramBtn);
        cardBody.appendChild(socialShare);
      }
      
      const cardFooter = document.createElement('div');
      cardFooter.className = 'card-footer';
      
      const locationDiv = document.createElement('div');
      locationDiv.className = 'card-location';
      locationDiv.innerHTML = `
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
          <circle cx="12" cy="10" r="3"></circle>
        </svg>
        ${item.type === 'event' ? item.overview.Venue : item.neighborhood}
      `;
      
      cardFooter.appendChild(locationDiv);
      
      const buttonsDiv = document.createElement('div');
      buttonsDiv.className = 'card-buttons';
      
      if (item.coords) {
        const mapLink = document.createElement('a');
        mapLink.className = 'card-btn secondary';
        mapLink.innerHTML = `
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
            <circle cx="12" cy="10" r="3"></circle>
          </svg>
          Map
        `;
        mapLink.href = `https://maps.google.com/?q=${item.coords[0]},${item.coords[1]}`;
        mapLink.target = '_blank';
        
        buttonsDiv.appendChild(mapLink);
      }
      
      for (const [text, url] of Object.entries(item.links)) {
        if (text !== 'Contact') { // Skip contact links as they're in the overview
          const link = document.createElement('a');
          link.className = 'card-btn';
          link.textContent = text;
          link.href = url;
          link.target = '_blank';
          
          buttonsDiv.appendChild(link);
        }
      }
      
      cardFooter.appendChild(buttonsDiv);
      
      card.appendChild(cardHeader);
      card.appendChild(cardBody);
      card.appendChild(cardFooter);
      
      return card;
    }

    // Calculate distance between two coordinates
    function calculateDistance(lat1, lon1, lat2, lon2) {
      const R = 6371; // Radius of the earth in km
      const dLat = deg2rad(lat2 - lat1);
      const dLon = deg2rad(lon2 - lon1); 
      const a = 
        Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * 
        Math.sin(dLon/2) * Math.sin(dLon/2); 
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
      const d = R * c; // Distance in km
      return d;
    }

    function deg2rad(deg) {
      return deg * (Math.PI/180);
    }

    function initMap() {
      try {
        // Create a default fallback position for Riyadh city center
        const defaultPosition = [24.7136, 46.6753];
        
        // Create the map with error handling
        const map = L.map('map', {
          // Provide fallback options in case of loading issues
          center: defaultPosition,
          zoom: 12,
          minZoom: 10,
          maxZoom: 18
        }).setView(defaultPosition, 12);
        
        // Add the tile layer with error handling
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
          maxZoom: 19,
          // Provide fallback options
          errorTileUrl: 'https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.14.0/flags/4x3/sa.svg'
        }).addTo(map);
        
        // Store map in window object for later access
        window.riyadhMap = map;
        
        // Add a message if tiles fail to load
        map.on('tileerror', function(error) {
          console.log('Tile loading error, using fallback display');
        });
        
        // Add cluster markers for better visualization
        window.markerClusterGroup = L.layerGroup().addTo(map);
      } catch (e) {
        console.error('Map initialization error:', e);
        // Create a fallback display when map cannot be loaded
        const mapElement = document.getElementById('map');
        if (mapElement) {
          mapElement.innerHTML = `
            <div style="height: 100%; display: flex; align-items: center; justify-content: center; flex-direction: column; background: #f5f5f5; color: #333;">
              <div style="font-size: 3rem; margin-bottom: 1rem;">üó∫Ô∏è</div>
              <p>Map could not be loaded. Please check your internet connection.</p>
            </div>
          `;
        }
      }
    }

    function updateMapMarkers() {
      try {
        const map = window.riyadhMap;
        if (!map) return;
        
        // Clear existing markers
        if (window.markerClusterGroup) {
          window.markerClusterGroup.clearLayers();
        }
        
        // Get all visible cards with coordinates
        const cards = document.querySelectorAll('.card:not([style*="display: none"])[data-coords]');
        
        // If no cards, center map on Riyadh
        if (cards.length === 0) {
          map.setView([24.7136, 46.6753], 12);
          return;
        }
        
        // Store all markers
        const markers = [];
        
        // Add markers for each card
        cards.forEach(card => {
          const coords = card.dataset.coords.split(',').map(Number);
          const name = card.dataset.name;
          const type = card.dataset.type;
          
          // Set marker color based on type
          let markerColor;
          if (type === 'cafe') markerColor = '#0ea5e9';
          else if (type === 'restaurant') markerColor = '#f97316';
          else markerColor = '#8b5cf6';
          
          // Create custom marker
          const marker = L.marker(coords, {
            icon: L.divIcon({
              className: 'custom-marker',
              html: `
                <div style="
                  width: 28px;
                  height: 28px;
                  background-color: ${markerColor};
                  border-radius: 50%;
                  border: 2px solid white;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  color: white;
                  font-weight: bold;
                  font-size: 12px;
                  box-shadow: 0 2px 4px rgba(0,0,0,0.3);
                  transition: transform 0.2s ease;
                ">
                  ${type === 'cafe' ? '‚òï' : type === 'restaurant' ? 'üçΩÔ∏è' : 'üéâ'}
                </div>
              `,
              iconSize: [28, 28],
              iconAnchor: [14, 14]
            })
          });
          
          // Add popup with name and type
          marker.bindPopup(`
            <div style="font-weight: 500; font-size: 14px; padding: 8px 4px;">
              <div style="color: ${markerColor}; margin-bottom: 4px; text-transform: uppercase; font-size: 11px; letter-spacing: 0.05em;">
                ${type.charAt(0).toUpperCase() + type.slice(1)}
              </div>
              <div style="font-size: 16px; font-weight: 600; margin-bottom: 4px;">${name}</div>
              ${userLocation ? `<div style="font-size: 12px; color: #666;">
                <i class="fas fa-map-marker-alt"></i> ${calculateDistance(
                  userLocation[0], userLocation[1], coords[0], coords[1]
                ).toFixed(1)} km away
              </div>` : ''}
            </div>
          `, {
            closeButton: false,
            className: 'custom-popup'
          });
          
          // Add hover effect
          marker.on('mouseover', function() {
            this._icon.style.transform = 'scale(1.2)';
            card.style.boxShadow = '0 0 0 3px var(--accent)';
          });
          
          marker.on('mouseout', function() {
            this._icon.style.transform = 'scale(1)';
            card.style.boxShadow = '';
          });
          
          // Add click event to highlight corresponding card
          marker.on('click', function() {
            card.scrollIntoView({ behavior: 'smooth', block: 'center' });
            card.style.boxShadow = '0 0 0 3px var(--accent)';
            setTimeout(() => {
              card.style.boxShadow = '';
            }, 2000);
          });
          
          // Add to marker group
          window.markerClusterGroup.addLayer(marker);
          markers.push(marker);
        });
        
        // Fit bounds of markers
        if (markers.length > 0) {
          const group = L.featureGroup(markers);
          map.fitBounds(group.getBounds().pad(0.1));
        }
      } catch (e) {
        console.error('Error updating map markers:', e);
      }
    }

    // Apply filters with expanded functionality
    function applyFilters() {
      // Get filter values
      const neighborhood = document.getElementById('filter-neighborhood').value;
      const type = document.getElementById('filter-type').value;
      const priceRange = document.getElementById('price-range').value;
      const rating = document.getElementById('filter-rating').value;
      const coffee = document.getElementById('filter-coffee').value;
      const eventCategory = document.getElementById('filter-event-category').value;
      const searchText = document.getElementById('search-input').value.trim().toLowerCase();
      
      // Convert price range value to price string
      let price = '';
      if (priceRange === '1') price = '$';
      else if (priceRange === '2') price = '$$';
      else if (priceRange === '3') price = '$$$';
      
      // Filter data
      const filteredData = {
        cafes: data.cafes.filter(cafe => filterItem(cafe, neighborhood, type, price, rating, selectedCuisines, coffee, eventCategory, searchText)),
        restaurants: data.restaurants.filter(restaurant => filterItem(restaurant, neighborhood, type, price, rating, selectedCuisines, coffee, eventCategory, searchText)),
        events: data.events.filter(event => filterItem(event, neighborhood, type, price, rating, selectedCuisines, coffee, eventCategory, searchText))
      };
      
      // Apply "Open Now" filter if active
      if (isOpenNowFilterActive) {
        filteredData.cafes = filteredData.cafes.filter(cafe => isOpenNow(cafe));
        filteredData.restaurants = filteredData.restaurants.filter(restaurant => isOpenNow(restaurant));
        // Events don't have open/closed status
      }
      
      // Sort by distance if active
      if (isSortByDistanceActive && userLocation) {
        const sortByDistance = (a, b) => {
          const distA = calculateDistance(userLocation[0], userLocation[1], a.coords[0], a.coords[1]);
          const distB = calculateDistance(userLocation[0], userLocation[1], b.coords[0], b.coords[1]);
          return distA - distB;
        };
        
        filteredData.cafes.sort(sortByDistance);
        filteredData.restaurants.sort(sortByDistance);
        filteredData.events.sort(sortByDistance);
      }
      
      // Render filtered results
      renderCards(filteredData);
      updateActiveFilters();
    }

    function filterItem(item, neighborhood, type, price, rating, cuisines, coffee, eventCategory, searchText) {
      // Type filter
      if (type && item.type !== type) return false;
      
      // Neighborhood filter (only for venues)
      if (neighborhood && item.neighborhood !== neighborhood) return false;
      
      // Price filter (only for venues)
      if (price && item.price !== price) return false;
      
      // Rating filter (only for venues)
      if (rating && item.rating < parseFloat(rating)) return false;
      
      // Cuisine filter with multi-select support (only for venues)
      if (cuisines && cuisines.length > 0) {
        if (!item.cuisine) return false;
        
        // Check if any of the selected cuisines match
        let cuisineMatch = false;
        
        // Handle comma-separated cuisines
        if (typeof item.cuisine === 'string' && item.cuisine.includes(',')) {
          const itemCuisines = item.cuisine.split(',').map(c => c.trim());
          cuisineMatch = cuisines.some(c => itemCuisines.includes(c));
        } else {
          cuisineMatch = cuisines.includes(item.cuisine);
        }
        
        if (!cuisineMatch) return false;
      }
      
      // Coffee filter (only for cafes)
      if (coffee && item.coffee !== coffee) return false;
      
      // Event category filter (only for events)
      if (eventCategory && item.category !== eventCategory) return false;
      
      // Search text filter (across all items)
      if (searchText) {
        const searchFields = [
          item.name,
          item.neighborhood || '',
          item.cuisine || '',
          item.coffee || '',
          item.category || '',
          item.description || '',
          ...Object.values(item.overview || {}).map(v => String(v))
        ].join(' ').toLowerCase();
        
        if (!searchFields.includes(searchText)) return false;
      }
      
      return true;
    }

    function clearFilters() {
      // Reset all filter inputs
      document.getElementById('filter-neighborhood').value = '';
      document.getElementById('filter-type').value = '';
      document.getElementById('price-range').value = '3'; // Reset to premium
      document.getElementById('filter-rating').value = '';
      document.getElementById('filter-coffee').value = '';
      document.getElementById('filter-event-category').value = '';
      document.getElementById('search-input').value = '';
      
      // Reset price labels
      document.querySelectorAll('.price-labels span').forEach((label, i) => {
        label.style.fontWeight = i < 3 ? '600' : '400';
        label.style.color = i < 3 ? 'var(--primary)' : 'var(--text-light)';
      });
      
      // Clear cuisine multiselect
      document.querySelectorAll('#cuisine-multiselect .multi-select-option').forEach(option => {
        option.classList.remove('selected');
        option.querySelector('.multi-select-checkbox').innerHTML = '';
      });
      document.querySelector('#cuisine-multiselect .multi-select-placeholder').textContent = 'All Cuisines';
      selectedCuisines = [];
      
      // Clear quick filter selection
      document.querySelectorAll('.quick-filter').forEach(filter => {
        filter.classList.remove('active');
      });
      document.querySelector('.quick-filter[data-filter="all"]').classList.add('active');
      
      // Reset "Open Now" filter
      isOpenNowFilterActive = false;
      
      // Render all data
      renderCards();
      
      // Clear active filter chips
      document.getElementById('active-filters').innerHTML = '';
      
      // Show notification
      window.notyf.info('Filters have been cleared.');
    }
 
    function updateActiveFilters() {
      const activeFiltersDiv = document.getElementById('active-filters');
      if (!activeFiltersDiv) return;
      
      activeFiltersDiv.innerHTML = '';
      
      const filters = [
        { id: 'filter-neighborhood', label: 'Neighborhood' },
        { id: 'filter-type', label: 'Type' },
        { id: 'price-range', label: 'Price', valueMap: {'1': '$', '2': '$$', '3': '$$$'} },
        { id: 'filter-rating', label: 'Min Rating' },
        { id: 'filter-coffee', label: 'Coffee Type' },
        { id: 'filter-event-category', label: 'Event Category' }
      ];
      
      const searchText = document.getElementById('search-input').value.trim();
      
      // Create filter chips for active filters
      filters.forEach(filter => {
        const element = document.getElementById(filter.id);
        if (element && element.value) {
          const chip = document.createElement('div');
          chip.className = 'filter-chip';
          
          let displayValue = element.value;
          
          // Handle select elements
          if (element.tagName === 'SELECT' && element.selectedIndex >= 0) {
            displayValue = element.options[element.selectedIndex].text;
          } 
          // Handle price range slider
          else if (filter.valueMap && filter.valueMap[element.value]) {
            displayValue = filter.valueMap[element.value];
          }
          
          chip.innerHTML = `${filter.label}: ${displayValue} <button>&times;</button>`;
          
          chip.addEventListener('click', () => {
            element.value = element.tagName === 'SELECT' ? '' : '3'; // Reset to default/empty
            
            // Special handling for price range
            if (filter.id === 'price-range') {
              // Reset price labels visualization
              document.querySelectorAll('.price-labels span').forEach((label, i) => {
                label.style.fontWeight = i < 3 ? '600' : '400';
                label.style.color = i < 3 ? 'var(--primary)' : 'var(--text-light)';
              });
            }
            
            applyFilters();
          });
          
          activeFiltersDiv.appendChild(chip);
        }
      });
      
      // Create chip for cuisines if any are selected
      if (selectedCuisines.length > 0) {
        const chip = document.createElement('div');
        chip.className = 'filter-chip';
        
        const displayValue = selectedCuisines.length === 1 
          ? selectedCuisines[0] 
          : `${selectedCuisines.length} cuisines`;
        
        chip.innerHTML = `Cuisine: ${displayValue} <button>&times;</button>`;
        
        chip.addEventListener('click', () => {
          // Clear cuisine selections
          document.querySelectorAll('#cuisine-multiselect .multi-select-option').forEach(option => {
            option.classList.remove('selected');
            option.querySelector('.multi-select-checkbox').innerHTML = '';
          });
          document.querySelector('#cuisine-multiselect .multi-select-placeholder').textContent = 'All Cuisines';
          selectedCuisines = [];
          
          applyFilters();
        });
        
        activeFiltersDiv.appendChild(chip);
      }
      
      // Create chip for "Open Now" filter
      if (isOpenNowFilterActive) {
        const chip = document.createElement('div');
        chip.className = 'filter-chip';
        chip.innerHTML = `<i class="fas fa-door-open"></i> Open Now <button>&times;</button>`;
        
        chip.addEventListener('click', () => {
          isOpenNowFilterActive = false;
          document.querySelector('.quick-filter[data-filter="open-now"]').classList.remove('active');
          applyFilters();
        });
        
        activeFiltersDiv.appendChild(chip);
      }
      
      // Create chip for sort by distance
      if (isSortByDistanceActive) {
        const chip = document.createElement('div');
        chip.className = 'filter-chip';
        chip.innerHTML = `<i class="fas fa-sort-amount-down"></i> Sort by Distance <button>&times;</button>`;
        
        chip.addEventListener('click', () => {
          isSortByDistanceActive = false;
          document.getElementById('sort-distance').classList.remove('active');
          applyFilters();
        });
        
        activeFiltersDiv.appendChild(chip);
      }
      
      // Create search text chip if search is active
      if (searchText) {
        const chip = document.createElement('div');
        chip.className = 'filter-chip';
        chip.innerHTML = `Search: "${searchText}" <button>&times;</button>`;
        
        chip.addEventListener('click', () => {
          document.getElementById('search-input').value = '';
          applyFilters();
        });
        
        activeFiltersDiv.appendChild(chip);
      }
    }

    function setupFilters() {
      const applyBtn = document.getElementById('apply-btn');
      const clearBtn = document.getElementById('clear-btn');
      const searchBtn = document.getElementById('search-btn');
      const searchInput = document.getElementById('search-input');
      
      if (applyBtn) {
        applyBtn.addEventListener('click', applyFilters);
      }
      
      if (searchBtn) {
        searchBtn.addEventListener('click', applyFilters);
      }
      
      if (searchInput) {
        searchInput.addEventListener('keyup', function(e) {
          if (e.key === 'Enter') applyFilters();
        });
      }
      
      if (clearBtn) {
        clearBtn.addEventListener('click', clearFilters);
      }
      
      // Apply filters on price range change (with debounce)
      const priceRange = document.getElementById('price-range');
      if (priceRange) {
        let priceRangeTimeout;
        priceRange.addEventListener('change', () => {
          clearTimeout(priceRangeTimeout);
          priceRangeTimeout = setTimeout(applyFilters, 300);
        });
      }
    }

    function setupQuickFilters() {
      const quickFilters = document.querySelectorAll('.quick-filter');
      
      // Make "All Places" active by default
      document.querySelector('.quick-filter[data-filter="all"]').classList.add('active');
      
      quickFilters.forEach(filter => {
        filter.addEventListener('click', function() {
          const filterType = this.dataset.filter;
          
          // Handle "All Places" differently
          if (filterType === 'all') {
            // Clear all filters and remove all active states
            clearFilters();
            quickFilters.forEach(f => f.classList.remove('active'));
            this.classList.add('active');
            return;
          }
          
          // Handle "Open Now" toggle
          if (filterType === 'open-now') {
            // Toggle Open Now state
            isOpenNowFilterActive = !isOpenNowFilterActive;
            this.classList.toggle('active', isOpenNowFilterActive);
            
            // Make sure "All Places" is not active
            document.querySelector('.quick-filter[data-filter="all"]').classList.remove('active');
            
            // Apply filters
            applyFilters();
            return;
          }
          
          // For other filters, first clear existing filters
          clearFilters();
          
          // Remove active from "All Places"
          document.querySelector('.quick-filter[data-filter="all"]').classList.remove('active');
          
          // Mark this filter as active
          this.classList.add('active');
          
          // Set appropriate filter values
          switch(filterType) {
            case 'top-rated':
              document.getElementById('filter-rating').value = '4.5';
              break;
              
            case 'budget':
              document.getElementById('price-range').value = '1';
              // Update price label styling
              document.querySelectorAll('.price-labels span').forEach((label, i) => {
                if (i === 0) {
                  label.style.fontWeight = '600';
                  label.style.color = 'var(--primary)';
                } else {
                  label.style.fontWeight = '400';
                  label.style.color = 'var(--text-light)';
                }
              });
              break;
              
            case 'new':
              document.getElementById('filter-neighborhood').value = 'Al Yasmin';
              break;
              
            case 'coffee':
              document.getElementById('filter-type').value = 'cafe';
              document.getElementById('filter-coffee').value = 'Specialty';
              break;
              
            case 'events':
              document.getElementById('filter-type').value = 'event';
              break;
          }
          
          // Apply the filters
          applyFilters();
        });
      });
    }

    function setupNavigation() {
      const navLinks = document.querySelectorAll('.nav-link');
      
      navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          
          // Remove active state from all links
          navLinks.forEach(l => l.classList.remove('active'));
          
          // Add active state to clicked link
          this.classList.add('active');
          
          // Hide all sections
          document.querySelectorAll('.section').forEach(section => {
            section.style.display = 'none';
          });
          
          // Show the selected section
          const target = this.getAttribute('href');
          if (target === '#favorites') {
            document.getElementById('favorites').style.display = 'block';
            renderFavorites();
          } else {
            const targetSection = document.querySelector(target);
            if (targetSection) {
              targetSection.style.display = 'block';
              
              // Animate section in
              targetSection.style.animation = 'none';
              void targetSection.offsetWidth; // Trigger reflow
              targetSection.style.animation = 'fadeIn 0.5s ease-out';
            }
          }
        });
      });
    }

    function setupThemeToggle() {
      const themeToggle = document.getElementById('theme-toggle');
      if (!themeToggle) return;
      
      // Initialize theme toggle button based on current theme
      if (document.documentElement.getAttribute('data-theme') === 'dark') {
        themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
      } else {
        themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
      }
      
      // Add click handler
      themeToggle.addEventListener('click', function() {
        if (document.documentElement.getAttribute('data-theme') === 'dark') {
          document.documentElement.setAttribute('data-theme', 'light');
          themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
          window.notyf.success('Switched to Light Mode');
        } else {
          document.documentElement.setAttribute('data-theme', 'dark');
          themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
          window.notyf.success('Switched to Dark Mode');
        }
      });
      
      // Listen for system preference changes
      window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
        if (event.matches) {
          document.documentElement.setAttribute('data-theme', 'dark');
          themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        } else {
          document.documentElement.setAttribute('data-theme', 'light');
          themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
        }
      });
    }

    function setupNewsletter() {
      const newsletterForm = document.getElementById('newsletter-form');
      if (!newsletterForm) return;
      
      newsletterForm.addEventListener('submit', function(e) {
        e.preventDefault();
        const email = this.querySelector('input').value;
        
        // Show success notification
        window.notyf.success(`Thank you for subscribing with ${email}! You'll receive updates about Riyadh's best venues and events.`);
        
        // Reset form
        this.reset();
      });
    }

    function updateCountdowns() {
      const now = new Date();
      
      document.querySelectorAll('.countdown .countdown-text').forEach(countdownEl => {
        const card = countdownEl.closest('.card');
        const dateStr = card.dataset.date;
        
        if (!dateStr) return;
        
        const eventDate = new Date(dateStr);
        const diff = eventDate - now;
        
        if (diff <= 0) {
          countdownEl.textContent = 'Event is happening now!';
          return;
        }
        
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        countdownEl.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
      });
    }
  </script>
  <script>
    function isPlaceOpen(hoursStr) {
      if (!hoursStr) return false;
  
      const now = new Date();
      const day = now.getDay(); // 0 = Sunday
      const hours = now.getHours();
      const minutes = now.getMinutes();
  
      const timeStr = `${hours}:${minutes < 10 ? '0' : ''}${minutes}`;
      const currentTime = parseInt(hours + '' + (minutes < 10 ? '0' + minutes : minutes));
  
      // Handle split hours like "7 AM - 11:30 AM, 12:30 PM - 2 AM"
      const parts = hoursStr.split(',').map(part => part.trim());
  
      for (let part of parts) {
        let [from, to] = part.split(' - ');
        if (!to) continue;
  
        const from24 = convertTo24(from.trim());
        const to24 = convertTo24(to.trim());
  
        const fromTime = parseInt(from24.replace(':', ''));
        const toTime = parseInt(to24.replace(':', ''));
  
        // Handle closing after midnight (e.g., 7 PM - 2 AM)
        if (toTime < fromTime) {
          if (currentTime >= fromTime || currentTime < toTime) {
            return true;
          }
        } else {
          if (currentTime >= fromTime && currentTime < toTime) {
            return true;
          }
        }
      }
  
      return false;
    }
  
    function convertTo24(timeStr) {
      const [time, modifier] = timeStr.toUpperCase().split(' ');
      let [hours, minutes] = time.split(':');
      hours = parseInt(hours);
      minutes = minutes || '00';
  
      if (modifier === 'PM' && hours !== 12) {
        hours += 12;
      } else if (modifier === 'AM' && hours === 12) {
        hours = 0;
      }
  
      return `${hours}:${minutes}`;
    }
  
    function updateOpenStatusCards() {
      document.querySelectorAll('.card').forEach(card => {
        const hoursText = card.querySelector('.card-table td:nth-child(2)')?.innerText || '';
        const isOpen = isPlaceOpen(hoursText);
  
        let badge = card.querySelector('.open-status');
        if (!badge) {
          badge = document.createElement('div');
          badge.className = 'open-status';
          card.appendChild(badge);
        }
  
        badge.textContent = isOpen ? 'Open Now' : 'Closed';
        badge.classList.toggle('open', isOpen);
        badge.classList.toggle('closed', !isOpen);
      });
    }
  
    window.addEventListener('DOMContentLoaded', updateOpenStatusCards);
  </script>  
</body>
</html>
